{"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.launch = launch;\n\nvar _index = _interopRequireDefault(require(\"./routes/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst express = require(\"express\");\n\nconst cors = require('cors');\n\nconst mongoose = require(\"mongoose\");\n\nfunction launch({\n  host,\n  protocol,\n  port\n}) {\n  const app = express();\n\n  require('dotenv').config();\n\n  const socket = require('socket.io');\n\n  app.use(cors());\n  app.use(express.json());\n  mongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/chat-app`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n  app.use(_index.default);\n  const server = app.listen(process.env.PORT, () => {\n    console.log(`Server started on Port ${process.env.PORT}`);\n  });\n  const io = socket(server, {\n    cors: {\n      origin: \"http://localhost:3001\",\n      credentials: true\n    }\n  });\n  global.onlineUsers = new Map();\n  io.on(\"connection\", socket => {\n    global.chatSocket = socket;\n    socket.on(\"add-user\", userId => {\n      onlineUsers.set(userId, socket.id);\n    });\n    socket.on(\"send-msg\", data => {\n      const sendUserSocket = onlineUsers.get(data.to);\n\n      if (sendUserSocket) {\n        socket.to(sendUserSocket).emit(\"msg-receive\", data.message);\n      }\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJtb25nb29zZSIsImxhdW5jaCIsImhvc3QiLCJwcm90b2NvbCIsInBvcnQiLCJhcHAiLCJjb25maWciLCJzb2NrZXQiLCJ1c2UiLCJqc29uIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSTkFNRSIsIkRCX1BBU1NXT1JEIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIiwiZGVmYXVsdFJvdXRlciIsInNlcnZlciIsImxpc3RlbiIsIlBPUlQiLCJpbyIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwiZ2xvYmFsIiwib25saW5lVXNlcnMiLCJNYXAiLCJvbiIsImNoYXRTb2NrZXQiLCJ1c2VySWQiLCJzZXQiLCJpZCIsImRhdGEiLCJzZW5kVXNlclNvY2tldCIsImdldCIsInRvIiwiZW1pdCIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9zb2NrZXQuaW8vY2hhdC1zb2NrZXQuaW9fMi9zZXJ2ZXIvc3JjLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuaW1wb3J0IGRlZmF1bHRSb3V0ZXIgZnJvbSBcIi4vcm91dGVzL2luZGV4XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2goeyBob3N0LCBwcm90b2NvbCwgcG9ydCB9KSB7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5cbmNvbnN0IHNvY2tldCA9IHJlcXVpcmUoJ3NvY2tldC5pbycpO1xuXG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcblxubW9uZ29vc2VcbiAgICAuY29ubmVjdChgbW9uZ29kYitzcnY6Ly8ke3Byb2Nlc3MuZW52LkRCX1VTRVJOQU1FfToke3Byb2Nlc3MuZW52LkRCX1BBU1NXT1JEfUBjbHVzdGVyMC5nYnZ4Zy5tb25nb2RiLm5ldC9jaGF0LWFwcGApXG4gICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCJykpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJGYWlsZWQgdG8gY29ubmVjdCBNb25nb0RCXCIsIGVycm9yKSk7XG5cbiAgICBhcHAudXNlKGRlZmF1bHRSb3V0ZXIpO1xuXG5jb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIHN0YXJ0ZWQgb24gUG9ydCAke3Byb2Nlc3MuZW52LlBPUlR9YCk7XG59KTtcblxuY29uc3QgaW8gPSBzb2NrZXQoc2VydmVyLHtcbiAgICBjb3JzOntcbiAgICAgICAgb3JpZ2luOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgICAgICBjcmVkZW50aWFsczogdHJ1ZSxcbiAgICB9XG59IClcbmdsb2JhbC5vbmxpbmVVc2VycyA9IG5ldyBNYXAoKTtcbmlvLm9uKFwiY29ubmVjdGlvblwiLCAoc29ja2V0KSA9PiB7XG4gIGdsb2JhbC5jaGF0U29ja2V0ID0gc29ja2V0O1xuICBzb2NrZXQub24oXCJhZGQtdXNlclwiLCAodXNlcklkKSA9PiB7XG4gICAgb25saW5lVXNlcnMuc2V0KHVzZXJJZCwgc29ja2V0LmlkKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKFwic2VuZC1tc2dcIiwgKGRhdGEpID0+IHtcbiAgICBjb25zdCBzZW5kVXNlclNvY2tldCA9IG9ubGluZVVzZXJzLmdldChkYXRhLnRvKTtcbiAgICBpZiAoc2VuZFVzZXJTb2NrZXQpIHtcbiAgICAgIHNvY2tldC50byhzZW5kVXNlclNvY2tldCkuZW1pdChcIm1zZy1yZWNlaXZlXCIsIGRhdGEu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","map":{"version":3,"names":["express","require","cors","mongoose","launch","host","protocol","port","app","config","socket","use","json","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error","defaultRouter","server","listen","PORT","io","origin","credentials","global","onlineUsers","Map","on","chatSocket","userId","set","id","data","sendUserSocket","get","to","emit","message"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/","sources":["index.js"],"sourcesContent":["const express = require(\"express\");\nconst cors = require('cors');\nconst mongoose = require(\"mongoose\");\nimport defaultRouter from \"./routes/index\";\n\nexport function launch({ host, protocol, port }) {\n\nconst app = express();\nrequire('dotenv').config();\n\n\nconst socket = require('socket.io');\n\napp.use(cors());\napp.use(express.json());\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/chat-app`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error));\n\n    app.use(defaultRouter);\n\nconst server = app.listen(process.env.PORT, () => {\n    console.log(`Server started on Port ${process.env.PORT}`);\n});\n\nconst io = socket(server,{\n    cors:{\n        origin: \"http://localhost:3001\",\n        credentials: true,\n    }\n} )\nglobal.onlineUsers = new Map();\nio.on(\"connection\", (socket) => {\n  global.chatSocket = socket;\n  socket.on(\"add-user\", (userId) => {\n    onlineUsers.set(userId, socket.id);\n  });\n\n  socket.on(\"send-msg\", (data) => {\n    const sendUserSocket = onlineUsers.get(data.to);\n    if (sendUserSocket) {\n      socket.to(sendUserSocket).emit(\"msg-receive\", data.message);\n    }\n  });\n});\n}"],"mappings":";;;;;;;AAGA;;;;AAHA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AAGO,SAASG,MAAT,CAAgB;EAAEC,IAAF;EAAQC,QAAR;EAAkBC;AAAlB,CAAhB,EAA0C;EAEjD,MAAMC,GAAG,GAAGR,OAAO,EAAnB;;EACAC,OAAO,CAAC,QAAD,CAAP,CAAkBQ,MAAlB;;EAGA,MAAMC,MAAM,GAAGT,OAAO,CAAC,WAAD,CAAtB;;EAEAO,GAAG,CAACG,GAAJ,CAAQT,IAAI,EAAZ;EACAM,GAAG,CAACG,GAAJ,CAAQX,OAAO,CAACY,IAAR,EAAR;EAEAT,QAAQ,CACHU,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,sCADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB;EAKId,GAAG,CAACG,GAAJ,CAAQY,cAAR;EAEJ,MAAMC,MAAM,GAAGhB,GAAG,CAACiB,MAAJ,CAAWX,OAAO,CAACC,GAAR,CAAYW,IAAvB,EAA6B,MAAM;IAC9CP,OAAO,CAACC,GAAR,CAAa,0BAAyBN,OAAO,CAACC,GAAR,CAAYW,IAAK,EAAvD;EACH,CAFc,CAAf;EAIA,MAAMC,EAAE,GAAGjB,MAAM,CAACc,MAAD,EAAQ;IACrBtB,IAAI,EAAC;MACD0B,MAAM,EAAE,uBADP;MAEDC,WAAW,EAAE;IAFZ;EADgB,CAAR,CAAjB;EAMAC,MAAM,CAACC,WAAP,GAAqB,IAAIC,GAAJ,EAArB;EACAL,EAAE,CAACM,EAAH,CAAM,YAAN,EAAqBvB,MAAD,IAAY;IAC9BoB,MAAM,CAACI,UAAP,GAAoBxB,MAApB;IACAA,MAAM,CAACuB,EAAP,CAAU,UAAV,EAAuBE,MAAD,IAAY;MAChCJ,WAAW,CAACK,GAAZ,CAAgBD,MAAhB,EAAwBzB,MAAM,CAAC2B,EAA/B;IACD,CAFD;IAIA3B,MAAM,CAACuB,EAAP,CAAU,UAAV,EAAuBK,IAAD,IAAU;MAC9B,MAAMC,cAAc,GAAGR,WAAW,CAACS,GAAZ,CAAgBF,IAAI,CAACG,EAArB,CAAvB;;MACA,IAAIF,cAAJ,EAAoB;QAClB7B,MAAM,CAAC+B,EAAP,CAAUF,cAAV,EAA0BG,IAA1B,CAA+B,aAA/B,EAA8CJ,IAAI,CAACK,OAAnD;MACD;IACF,CALD;EAMD,CAZD;AAaC"}},"mtime":1659002218498},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"./api/user.route\"));\n\nvar _message = _interopRequireDefault(require(\"./api/message.route\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.use('/api/msg', _message.default);\nrouter.use('/api/user', _user.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2UiLCJNc2dSb3V0ZXIiLCJVc2VyUm91dGVyIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBVc2VyUm91dGVyIGZyb20gJy4vYXBpL3VzZXIucm91dGUnO1xuaW1wb3J0IE1zZ1JvdXRlciBmcm9tICcuL2FwaS9tZXNzYWdlLnJvdXRlJztcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIudXNlKCcvYXBpL21zZycsIE1zZ1JvdXRlcik7XG5yb3V0ZXIudXNlKCcvYXBpL3VzZXInLCBVc2VyUm91dGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBQSxHQUFmO0FBRUFELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGdCQUF2QjtBQUNBSCxNQUFNLENBQUNFLEdBQVAsQ0FBVyxXQUFYLEVBQXdCRSxhQUF4QjtlQUVlSixNIn0=","map":{"version":3,"names":["router","Router","use","MsgRouter","UserRouter"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/","sources":["index.js"],"sourcesContent":["import { Router } from 'express';\nimport UserRouter from './api/user.route';\nimport MsgRouter from './api/message.route';\nconst router = Router();\n\nrouter.use('/api/msg', MsgRouter);\nrouter.use('/api/user', UserRouter);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBC,gBAAvB;AACAH,MAAM,CAACE,GAAP,CAAW,WAAX,EAAwBE,aAAxB;eAEeJ,M"}},"mtime":1658939957359},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/user.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = require(\"../../controllers/user.controller\");\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", _user.register);\napi.post(\"/login\", _user.login);\napi.post(\"/avatar/:id\", _user.setAvatar);\napi.get(\"/allusers/:id\", _user.getAllUsers);\napi.get(\"/logout/:id\", _user.logOut);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcGkiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXIiLCJsb2dpbiIsInNldEF2YXRhciIsImdldCIsImdldEFsbFVzZXJzIiwibG9nT3V0Il0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvYXBpLyIsInNvdXJjZXMiOlsidXNlci5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuaW1wb3J0IHtyZWdpc3RlciwgbG9naW4sIHNldEF2YXRhciwgZ2V0QWxsVXNlcnMsIGxvZ091dH0gIGZyb20gXCIuLi8uLi9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXJcIjtcblxuYXBpLnBvc3QoXCIvcmVnaXN0ZXJcIiwgcmVnaXN0ZXIpXG5hcGkucG9zdChcIi9sb2dpblwiLCBsb2dpbilcbmFwaS5wb3N0KFwiL2F2YXRhci86aWRcIiwgc2V0QXZhdGFyKTtcbmFwaS5nZXQoXCIvYWxsdXNlcnMvOmlkXCIsIGdldEFsbFVzZXJzKTtcbmFwaS5nZXQoXCIvbG9nb3V0LzppZFwiLCBsb2dPdXQpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFwaTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFEQSxNQUFNQSxHQUFHLEdBQUcsSUFBQUMsZUFBQSxHQUFaO0FBR0FELEdBQUcsQ0FBQ0UsSUFBSixDQUFTLFdBQVQsRUFBc0JDLGNBQXRCO0FBQ0FILEdBQUcsQ0FBQ0UsSUFBSixDQUFTLFFBQVQsRUFBbUJFLFdBQW5CO0FBQ0FKLEdBQUcsQ0FBQ0UsSUFBSixDQUFTLGFBQVQsRUFBd0JHLGVBQXhCO0FBQ0FMLEdBQUcsQ0FBQ00sR0FBSixDQUFRLGVBQVIsRUFBeUJDLGlCQUF6QjtBQUNBUCxHQUFHLENBQUNNLEdBQUosQ0FBUSxhQUFSLEVBQXVCRSxZQUF2QjtlQUdlUixHIn0=","map":{"version":3,"names":["api","Router","post","register","login","setAvatar","get","getAllUsers","logOut"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/","sources":["user.route.js"],"sourcesContent":["import { Router } from 'express';\nconst api = Router();\nimport {register, login, setAvatar, getAllUsers, logOut}  from \"../../controllers/user.controller\";\n\napi.post(\"/register\", register)\napi.post(\"/login\", login)\napi.post(\"/avatar/:id\", setAvatar);\napi.get(\"/allusers/:id\", getAllUsers);\napi.get(\"/logout/:id\", logOut);\n\n\nexport default api;"],"mappings":";;;;;;;AAAA;;AAEA;;AADA,MAAMA,GAAG,GAAG,IAAAC,eAAA,GAAZ;AAGAD,GAAG,CAACE,IAAJ,CAAS,WAAT,EAAsBC,cAAtB;AACAH,GAAG,CAACE,IAAJ,CAAS,QAAT,EAAmBE,WAAnB;AACAJ,GAAG,CAACE,IAAJ,CAAS,aAAT,EAAwBG,eAAxB;AACAL,GAAG,CAACM,GAAJ,CAAQ,eAAR,EAAyBC,iBAAzB;AACAP,GAAG,CAACM,GAAJ,CAAQ,aAAR,EAAuBE,YAAvB;eAGeR,G"}},"mtime":1658932047017},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/user.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAvatar = exports.register = exports.login = exports.logOut = exports.getAllUsers = void 0;\n\nvar _user = _interopRequireDefault(require(\"../models/user.model\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst register = async (req, res, next) => {\n  try {\n    const {\n      username,\n      email,\n      password\n    } = req.body;\n    const usernameCheck = await _user.default.findOne({\n      username\n    });\n\n    if (usernameCheck) {\n      return res.json({\n        message: \"Username already used\",\n        status: false\n      });\n    }\n\n    const emailCheck = await _user.default.findOne({\n      email\n    });\n\n    if (emailCheck) {\n      return res.json({\n        message: \"Email already used\",\n        status: false\n      });\n    }\n\n    const hashedPassword = await _bcryptjs.default.hash(password, 10);\n    const user = await _user.default.create({\n      username,\n      email,\n      password: hashedPassword\n    });\n    delete user.password;\n    console.log(password);\n    return res.status(201).send({\n      status: true,\n      user\n    });\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.register = register;\n\nconst login = async (req, res, next) => {\n  try {\n    const {\n      username,\n      password\n    } = req.body;\n    const user = await _user.default.findOne({\n      username\n    });\n    if (!user) return res.json({\n      msg: \"Incorrect Username or Password\",\n      status: false\n    });\n    const isPasswordValid = await _bcryptjs.default.compare(password, user.password);\n    if (!isPasswordValid) return res.json({\n      msg: \"Incorrect Username or Password\",\n      status: false\n    });\n    delete user.password;\n    return res.json({\n      status: true,\n      user\n    });\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.login = login;\n\nconst setAvatar = async (req, res, next) => {\n  try {\n    const userId = req.params.id;\n    const avatarImage = req.body.image;\n    const userData = await _user.default.findByIdAndUpdate(userId, {\n      isAvatarImageSet: true,\n      avatarImage\n    }, {\n      new: true\n    });\n    return res.json({\n      isSet: userData.isAvatarImageSet,\n      image: userData.avatarImage\n    });\n  } catch (ex) {\n    next(ex);\n  }\n};\n\nexports.setAvatar = setAvatar;\n\nconst getAllUsers = async (req, res, next) => {\n  try {\n    const users = await _user.default.find({\n      _id: {\n        $ne: req.params.id\n      }\n    }).select([\"email\", \"username\", \"avatarImage\", \"_id\"]);\n    return res.json(users);\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst logOut = async (req, res, next) => {\n  try {\n    if (!req.params.id) return res.json({\n      msg: \"User id is required \"\n    });\n    onlineUsers.delete(req.params.id);\n    return res.status(200).send();\n  } catch (ex) {\n    next(ex);\n  }\n};\n\nexports.logOut = logOut;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlcm5hbWVDaGVjayIsIlVzZXIiLCJmaW5kT25lIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJlbWFpbENoZWNrIiwiaGFzaGVkUGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwidXNlciIsImNyZWF0ZSIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwiZXJyb3IiLCJsb2dpbiIsIm1zZyIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJzZXRBdmF0YXIiLCJ1c2VySWQiLCJwYXJhbXMiLCJpZCIsImF2YXRhckltYWdlIiwiaW1hZ2UiLCJ1c2VyRGF0YSIsImZpbmRCeUlkQW5kVXBkYXRlIiwiaXNBdmF0YXJJbWFnZVNldCIsIm5ldyIsImlzU2V0IiwiZXgiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwiZmluZCIsIl9pZCIsIiRuZSIsInNlbGVjdCIsImxvZ091dCIsIm9ubGluZVVzZXJzIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInVzZXIuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci5tb2RlbCc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcblxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB1c2VybmFtZUNoZWNrID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWUgfSk7XG4gICAgICAgIGlmICh1c2VybmFtZUNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiBcIlVzZXJuYW1lIGFscmVhZHkgdXNlZFwiLCBzdGF0dXM6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVtYWlsQ2hlY2sgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICAgICAgaWYgKGVtYWlsQ2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6IFwiRW1haWwgYWxyZWFkeSB1c2VkXCIsIHN0YXR1czogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGUgdXNlci5wYXNzd29yZDtcbiAgICAgICAgY29uc29sZS5sb2cocGFzc3dvcmQpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IHN0YXR1czogdHJ1ZSwgdXNlciB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiBmYWxzZSwgZXJyb3IgfSlcblxuICAgIH1cblxufTtcblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWUgfSk7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBtc2c6IFwiSW5jb3JyZWN0IFVzZXJuYW1lIG9yIFBhc3N3b3JkXCIsIHN0YXR1czogZmFsc2UgfSk7XG4gICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgbXNnOiBcIkluY29ycmVjdCBVc2VybmFtZSBvciBQYXNzd29yZFwiLCBzdGF0dXM6IGZhbHNlIH0pO1xuICAgICAgICBkZWxldGUgdXNlci5wYXNzd29yZDtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiB0cnVlLCB1c2VyIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiBmYWxzZSwgZXJyb3IgfSlcblxuICAgIH1cblxufTtcblxuZXhwb3J0IGNvbnN0IHNldEF2YXRhciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgYXZhdGFySW1hZ2UgPSByZXEuYm9keS5pbWFnZTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB7XG4gICAgICAgICAgaXNBdmF0YXJJbWFnZVNldDogdHJ1ZSxcbiAgICAgICAgICBhdmF0YXJJbWFnZSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICAgIGlzU2V0OiB1c2VyRGF0YS5pc0F2YXRhckltYWdlU2V0LFxuICAgICAgICBpbWFnZTogdXNlckRhdGEuYXZhdGFySW1hZ2UsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgbmV4dChleCk7XG4gICAgfVxuICB9O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHsgX2lkOiB7ICRuZTogcmVxLnBhcmFtcy5pZCB9IH0pLnNlbGVjdChbXG4gICAgICBcImVtYWlsXCIsXG4gICAgICBcInVzZXJuYW1lXCIsXG4gICAgICBcImF2YXRhckltYWdlXCIsXG4gICAgICBcIl9pZFwiLFxuICAgIF0pO1xuICAgIHJldHVybiByZXMuanNvbih1c2Vycyk7XG4gICAgICBcbiAgfVxuICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN0YXR1czogZmFsc2UsIGVycm9yIH0pXG5cbiAgfVxuXG59O1xuXG5leHBvcnQgY29uc3QgbG9nT3V0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFyZXEucGFyYW1zLmlkKSByZXR1cm4gcmVzLmpzb24oeyBtc2c6IFwiVXNlciBpZCBpcyByZXF1aXJlZCBcIiB9KTtcbiAgICBvbmxpbmVVc2Vycy5kZWxldGUocmVxLnBhcmFtcy5pZCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgbmV4dChleCk7XG4gIH1cblxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBR08sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDOUMsSUFBSTtJQUNBLE1BQU07TUFBRUMsUUFBRjtNQUFZQyxLQUFaO01BQW1CQztJQUFuQixJQUFnQ0wsR0FBRyxDQUFDTSxJQUExQztJQUNBLE1BQU1DLGFBQWEsR0FBRyxNQUFNQyxhQUFBLENBQUtDLE9BQUwsQ0FBYTtNQUFFTjtJQUFGLENBQWIsQ0FBNUI7O0lBQ0EsSUFBSUksYUFBSixFQUFtQjtNQUNmLE9BQU9OLEdBQUcsQ0FBQ1MsSUFBSixDQUFTO1FBQUVDLE9BQU8sRUFBRSx1QkFBWDtRQUFvQ0MsTUFBTSxFQUFFO01BQTVDLENBQVQsQ0FBUDtJQUNIOztJQUNELE1BQU1DLFVBQVUsR0FBRyxNQUFNTCxhQUFBLENBQUtDLE9BQUwsQ0FBYTtNQUFFTDtJQUFGLENBQWIsQ0FBekI7O0lBQ0EsSUFBSVMsVUFBSixFQUFnQjtNQUNaLE9BQU9aLEdBQUcsQ0FBQ1MsSUFBSixDQUFTO1FBQUVDLE9BQU8sRUFBRSxvQkFBWDtRQUFpQ0MsTUFBTSxFQUFFO01BQXpDLENBQVQsQ0FBUDtJQUNIOztJQUNELE1BQU1FLGNBQWMsR0FBRyxNQUFNQyxpQkFBQSxDQUFPQyxJQUFQLENBQVlYLFFBQVosRUFBc0IsRUFBdEIsQ0FBN0I7SUFFQSxNQUFNWSxJQUFJLEdBQUcsTUFBTVQsYUFBQSxDQUFLVSxNQUFMLENBQVk7TUFDM0JmLFFBRDJCO01BRTNCQyxLQUYyQjtNQUczQkMsUUFBUSxFQUFFUztJQUhpQixDQUFaLENBQW5CO0lBS0EsT0FBT0csSUFBSSxDQUFDWixRQUFaO0lBQ0FjLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZixRQUFaO0lBQ0EsT0FBT0osR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQlMsSUFBaEIsQ0FBcUI7TUFBRVQsTUFBTSxFQUFFLElBQVY7TUFBZ0JLO0lBQWhCLENBQXJCLENBQVA7RUFDSCxDQXBCRCxDQXFCQSxPQUFPSyxLQUFQLEVBQWM7SUFDVixPQUFPckIsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQlMsSUFBaEIsQ0FBcUI7TUFBRVQsTUFBTSxFQUFFLEtBQVY7TUFBaUJVO0lBQWpCLENBQXJCLENBQVA7RUFFSDtBQUVKLENBM0JNOzs7O0FBNkJBLE1BQU1DLEtBQUssR0FBRyxPQUFPdkIsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUMzQyxJQUFJO0lBQ0EsTUFBTTtNQUFFQyxRQUFGO01BQVlFO0lBQVosSUFBeUJMLEdBQUcsQ0FBQ00sSUFBbkM7SUFDQSxNQUFNVyxJQUFJLEdBQUcsTUFBTVQsYUFBQSxDQUFLQyxPQUFMLENBQWE7TUFBRU47SUFBRixDQUFiLENBQW5CO0lBQ0EsSUFBSSxDQUFDYyxJQUFMLEVBQ0UsT0FBT2hCLEdBQUcsQ0FBQ1MsSUFBSixDQUFTO01BQUVjLEdBQUcsRUFBRSxnQ0FBUDtNQUF5Q1osTUFBTSxFQUFFO0lBQWpELENBQVQsQ0FBUDtJQUNGLE1BQU1hLGVBQWUsR0FBRyxNQUFNVixpQkFBQSxDQUFPVyxPQUFQLENBQWVyQixRQUFmLEVBQXlCWSxJQUFJLENBQUNaLFFBQTlCLENBQTlCO0lBQ0EsSUFBSSxDQUFDb0IsZUFBTCxFQUNFLE9BQU94QixHQUFHLENBQUNTLElBQUosQ0FBUztNQUFFYyxHQUFHLEVBQUUsZ0NBQVA7TUFBeUNaLE1BQU0sRUFBRTtJQUFqRCxDQUFULENBQVA7SUFDRixPQUFPSyxJQUFJLENBQUNaLFFBQVo7SUFDQSxPQUFPSixHQUFHLENBQUNTLElBQUosQ0FBUztNQUFFRSxNQUFNLEVBQUUsSUFBVjtNQUFnQks7SUFBaEIsQ0FBVCxDQUFQO0VBQ0gsQ0FWRCxDQVdBLE9BQU9LLEtBQVAsRUFBYztJQUNWLE9BQU9yQixHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCUyxJQUFoQixDQUFxQjtNQUFFVCxNQUFNLEVBQUUsS0FBVjtNQUFpQlU7SUFBakIsQ0FBckIsQ0FBUDtFQUVIO0FBRUosQ0FqQk07Ozs7QUFtQkEsTUFBTUssU0FBUyxHQUFHLE9BQU8zQixHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQy9DLElBQUk7SUFDRixNQUFNMEIsTUFBTSxHQUFHNUIsR0FBRyxDQUFDNkIsTUFBSixDQUFXQyxFQUExQjtJQUNBLE1BQU1DLFdBQVcsR0FBRy9CLEdBQUcsQ0FBQ00sSUFBSixDQUFTMEIsS0FBN0I7SUFDQSxNQUFNQyxRQUFRLEdBQUcsTUFBTXpCLGFBQUEsQ0FBSzBCLGlCQUFMLENBQ3JCTixNQURxQixFQUVyQjtNQUNFTyxnQkFBZ0IsRUFBRSxJQURwQjtNQUVFSjtJQUZGLENBRnFCLEVBTXJCO01BQUVLLEdBQUcsRUFBRTtJQUFQLENBTnFCLENBQXZCO0lBUUEsT0FBT25DLEdBQUcsQ0FBQ1MsSUFBSixDQUFTO01BQ2QyQixLQUFLLEVBQUVKLFFBQVEsQ0FBQ0UsZ0JBREY7TUFFZEgsS0FBSyxFQUFFQyxRQUFRLENBQUNGO0lBRkYsQ0FBVCxDQUFQO0VBSUQsQ0FmRCxDQWVFLE9BQU9PLEVBQVAsRUFBVztJQUNYcEMsSUFBSSxDQUFDb0MsRUFBRCxDQUFKO0VBQ0Q7QUFDRixDQW5CSTs7OztBQXNCQSxNQUFNQyxXQUFXLEdBQUcsT0FBT3ZDLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDbkQsSUFBSTtJQUNGLE1BQU1zQyxLQUFLLEdBQUcsTUFBTWhDLGFBQUEsQ0FBS2lDLElBQUwsQ0FBVTtNQUFFQyxHQUFHLEVBQUU7UUFBRUMsR0FBRyxFQUFFM0MsR0FBRyxDQUFDNkIsTUFBSixDQUFXQztNQUFsQjtJQUFQLENBQVYsRUFBMkNjLE1BQTNDLENBQWtELENBQ3BFLE9BRG9FLEVBRXBFLFVBRm9FLEVBR3BFLGFBSG9FLEVBSXBFLEtBSm9FLENBQWxELENBQXBCO0lBTUEsT0FBTzNDLEdBQUcsQ0FBQ1MsSUFBSixDQUFTOEIsS0FBVCxDQUFQO0VBRUQsQ0FURCxDQVVBLE9BQU9sQixLQUFQLEVBQWM7SUFDVixPQUFPckIsR0FBRyxDQUFDVyxNQUFKLENBQVcsR0FBWCxFQUFnQlMsSUFBaEIsQ0FBcUI7TUFBRVQsTUFBTSxFQUFFLEtBQVY7TUFBaUJVO0lBQWpCLENBQXJCLENBQVA7RUFFSDtBQUVGLENBaEJNOzs7O0FBa0JBLE1BQU11QixNQUFNLEdBQUcsT0FBTzdDLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDOUMsSUFBSTtJQUNGLElBQUksQ0FBQ0YsR0FBRyxDQUFDNkIsTUFBSixDQUFXQyxFQUFoQixFQUFvQixPQUFPN0IsR0FBRyxDQUFDUyxJQUFKLENBQVM7TUFBRWMsR0FBRyxFQUFFO0lBQVAsQ0FBVCxDQUFQO0lBQ3BCc0IsV0FBVyxDQUFDQyxNQUFaLENBQW1CL0MsR0FBRyxDQUFDNkIsTUFBSixDQUFXQyxFQUE5QjtJQUNBLE9BQU83QixHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCUyxJQUFoQixFQUFQO0VBQ0QsQ0FKRCxDQUlFLE9BQU9pQixFQUFQLEVBQVc7SUFDWHBDLElBQUksQ0FBQ29DLEVBQUQsQ0FBSjtFQUNEO0FBRUYsQ0FUTSJ9","map":{"version":3,"names":["register","req","res","next","username","email","password","body","usernameCheck","User","findOne","json","message","status","emailCheck","hashedPassword","bcrypt","hash","user","create","console","log","send","error","login","msg","isPasswordValid","compare","setAvatar","userId","params","id","avatarImage","image","userData","findByIdAndUpdate","isAvatarImageSet","new","isSet","ex","getAllUsers","users","find","_id","$ne","select","logOut","onlineUsers","delete"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/","sources":["user.controller.js"],"sourcesContent":["import User from '../models/user.model';\nimport bcrypt from 'bcryptjs';\n\n\nexport const register = async (req, res, next) => {\n    try {\n        const { username, email, password } = req.body;\n        const usernameCheck = await User.findOne({ username });\n        if (usernameCheck) {\n            return res.json({ message: \"Username already used\", status: false });\n        }\n        const emailCheck = await User.findOne({ email });\n        if (emailCheck) {\n            return res.json({ message: \"Email already used\", status: false });\n        }\n        const hashedPassword = await bcrypt.hash(password, 10);\n\n        const user = await User.create({\n            username,\n            email,\n            password: hashedPassword\n        });\n        delete user.password;\n        console.log(password)\n        return res.status(201).send({ status: true, user })\n    }\n    catch (error) {\n        return res.status(200).send({ status: false, error })\n\n    }\n\n};\n\nexport const login = async (req, res, next) => {\n    try {\n        const { username, password } = req.body;\n        const user = await User.findOne({ username });\n        if (!user)\n          return res.json({ msg: \"Incorrect Username or Password\", status: false });\n        const isPasswordValid = await bcrypt.compare(password, user.password);\n        if (!isPasswordValid)\n          return res.json({ msg: \"Incorrect Username or Password\", status: false });\n        delete user.password;\n        return res.json({ status: true, user });\n    }\n    catch (error) {\n        return res.status(200).send({ status: false, error })\n\n    }\n\n};\n\nexport const setAvatar = async (req, res, next) => {\n    try {\n      const userId = req.params.id;\n      const avatarImage = req.body.image;\n      const userData = await User.findByIdAndUpdate(\n        userId,\n        {\n          isAvatarImageSet: true,\n          avatarImage,\n        },\n        { new: true }\n      );\n      return res.json({\n        isSet: userData.isAvatarImageSet,\n        image: userData.avatarImage,\n      });\n    } catch (ex) {\n      next(ex);\n    }\n  };\n\n\nexport const getAllUsers = async (req, res, next) => {\n  try {\n    const users = await User.find({ _id: { $ne: req.params.id } }).select([\n      \"email\",\n      \"username\",\n      \"avatarImage\",\n      \"_id\",\n    ]);\n    return res.json(users);\n      \n  }\n  catch (error) {\n      return res.status(200).send({ status: false, error })\n\n  }\n\n};\n\nexport const logOut = async (req, res, next) => {\n  try {\n    if (!req.params.id) return res.json({ msg: \"User id is required \" });\n    onlineUsers.delete(req.params.id);\n    return res.status(200).send();\n  } catch (ex) {\n    next(ex);\n  }\n\n};\n"],"mappings":"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"}},"mtime":1658932134232},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"./api/user.route\"));\n\nvar _message = _interopRequireDefault(require(\"./api/message.route\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.use('/api/msg', _message.default);\nrouter.use('/api/user', _user.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2UiLCJNc2dSb3V0ZXIiLCJVc2VyUm91dGVyIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBVc2VyUm91dGVyIGZyb20gJy4vYXBpL3VzZXIucm91dGUnO1xuaW1wb3J0IE1zZ1JvdXRlciBmcm9tICcuL2FwaS9tZXNzYWdlLnJvdXRlJztcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIudXNlKCcvYXBpL21zZycsIE1zZ1JvdXRlcik7XG5yb3V0ZXIudXNlKCcvYXBpL3VzZXInLCBVc2VyUm91dGVyKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNQSxNQUFNLEdBQUcsSUFBQUMsZUFBQSxHQUFmO0FBRUFELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLFVBQVgsRUFBdUJDLGdCQUF2QjtBQUNBSCxNQUFNLENBQUNFLEdBQVAsQ0FBVyxXQUFYLEVBQXdCRSxhQUF4QjtlQUVlSixNIn0=","map":{"version":3,"names":["router","Router","use","MsgRouter","UserRouter"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/","sources":["index.js"],"sourcesContent":["import { Router } from 'express';\nimport UserRouter from './api/user.route';\nimport MsgRouter from './api/message.route';\nconst router = Router();\n\nrouter.use('/api/msg', MsgRouter);\nrouter.use('/api/user', UserRouter);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,MAAM,GAAG,IAAAC,eAAA,GAAf;AAEAD,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBC,gBAAvB;AACAH,MAAM,CAACE,GAAP,CAAW,WAAX,EAAwBE,aAAxB;eAEeJ,M"}},"mtime":1658939957359},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/user.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = require(\"../../controllers/user.controller\");\n\nconst api = (0, _express.Router)();\napi.post(\"/register\", _user.register);\napi.post(\"/login\", _user.login);\napi.post(\"/avatar/:id\", _user.setAvatar);\napi.get(\"/allusers/:id\", _user.getAllUsers);\napi.get(\"/logout/:id\", _user.logOut);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcGkiLCJSb3V0ZXIiLCJwb3N0IiwicmVnaXN0ZXIiLCJsb2dpbiIsInNldEF2YXRhciIsImdldCIsImdldEFsbFVzZXJzIiwibG9nT3V0Il0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvYXBpLyIsInNvdXJjZXMiOlsidXNlci5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuaW1wb3J0IHtyZWdpc3RlciwgbG9naW4sIHNldEF2YXRhciwgZ2V0QWxsVXNlcnMsIGxvZ091dH0gIGZyb20gXCIuLi8uLi9jb250cm9sbGVycy91c2VyLmNvbnRyb2xsZXJcIjtcblxuYXBpLnBvc3QoXCIvcmVnaXN0ZXJcIiwgcmVnaXN0ZXIpXG5hcGkucG9zdChcIi9sb2dpblwiLCBsb2dpbilcbmFwaS5wb3N0KFwiL2F2YXRhci86aWRcIiwgc2V0QXZhdGFyKTtcbmFwaS5nZXQoXCIvYWxsdXNlcnMvOmlkXCIsIGdldEFsbFVzZXJzKTtcbmFwaS5nZXQoXCIvbG9nb3V0LzppZFwiLCBsb2dPdXQpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGFwaTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFEQSxNQUFNQSxHQUFHLEdBQUcsSUFBQUMsZUFBQSxHQUFaO0FBR0FELEdBQUcsQ0FBQ0UsSUFBSixDQUFTLFdBQVQsRUFBc0JDLGNBQXRCO0FBQ0FILEdBQUcsQ0FBQ0UsSUFBSixDQUFTLFFBQVQsRUFBbUJFLFdBQW5CO0FBQ0FKLEdBQUcsQ0FBQ0UsSUFBSixDQUFTLGFBQVQsRUFBd0JHLGVBQXhCO0FBQ0FMLEdBQUcsQ0FBQ00sR0FBSixDQUFRLGVBQVIsRUFBeUJDLGlCQUF6QjtBQUNBUCxHQUFHLENBQUNNLEdBQUosQ0FBUSxhQUFSLEVBQXVCRSxZQUF2QjtlQUdlUixHIn0=","map":{"version":3,"names":["api","Router","post","register","login","setAvatar","get","getAllUsers","logOut"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/","sources":["user.route.js"],"sourcesContent":["import { Router } from 'express';\nconst api = Router();\nimport {register, login, setAvatar, getAllUsers, logOut}  from \"../../controllers/user.controller\";\n\napi.post(\"/register\", register)\napi.post(\"/login\", login)\napi.post(\"/avatar/:id\", setAvatar);\napi.get(\"/allusers/:id\", getAllUsers);\napi.get(\"/logout/:id\", logOut);\n\n\nexport default api;"],"mappings":";;;;;;;AAAA;;AAEA;;AADA,MAAMA,GAAG,GAAG,IAAAC,eAAA,GAAZ;AAGAD,GAAG,CAACE,IAAJ,CAAS,WAAT,EAAsBC,cAAtB;AACAH,GAAG,CAACE,IAAJ,CAAS,QAAT,EAAmBE,WAAnB;AACAJ,GAAG,CAACE,IAAJ,CAAS,aAAT,EAAwBG,eAAxB;AACAL,GAAG,CAACM,GAAJ,CAAQ,eAAR,EAAyBC,iBAAzB;AACAP,GAAG,CAACM,GAAJ,CAAQ,aAAR,EAAuBE,YAAvB;eAGeR,G"}},"mtime":1658932047017},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/user.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setAvatar = exports.register = exports.login = exports.logOut = exports.getAllUsers = void 0;\n\nvar _user = _interopRequireDefault(require(\"../models/user.model\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst register = async (req, res, next) => {\n  try {\n    const {\n      username,\n      email,\n      password\n    } = req.body;\n    const usernameCheck = await _user.default.findOne({\n      username\n    });\n\n    if (usernameCheck) {\n      return res.json({\n        message: \"Username already used\",\n        status: false\n      });\n    }\n\n    const emailCheck = await _user.default.findOne({\n      email\n    });\n\n    if (emailCheck) {\n      return res.json({\n        message: \"Email already used\",\n        status: false\n      });\n    }\n\n    const hashedPassword = await _bcryptjs.default.hash(password, 10);\n    const user = await _user.default.create({\n      username,\n      email,\n      password: hashedPassword\n    });\n    delete user.password;\n    console.log(password);\n    return res.status(201).send({\n      status: true,\n      user\n    });\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.register = register;\n\nconst login = async (req, res, next) => {\n  try {\n    const {\n      username,\n      password\n    } = req.body;\n    const user = await _user.default.findOne({\n      username\n    });\n    if (!user) return res.json({\n      msg: \"Incorrect Username or Password\",\n      status: false\n    });\n    const isPasswordValid = await _bcryptjs.default.compare(password, user.password);\n    if (!isPasswordValid) return res.json({\n      msg: \"Incorrect Username or Password\",\n      status: false\n    });\n    delete user.password;\n    return res.json({\n      status: true,\n      user\n    });\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.login = login;\n\nconst setAvatar = async (req, res, next) => {\n  try {\n    const userId = req.params.id;\n    const avatarImage = req.body.image;\n    const userData = await _user.default.findByIdAndUpdate(userId, {\n      isAvatarImageSet: true,\n      avatarImage\n    }, {\n      new: true\n    });\n    return res.json({\n      isSet: userData.isAvatarImageSet,\n      image: userData.avatarImage\n    });\n  } catch (ex) {\n    next(ex);\n  }\n};\n\nexports.setAvatar = setAvatar;\n\nconst getAllUsers = async (req, res, next) => {\n  try {\n    const users = await _user.default.find({\n      _id: {\n        $ne: req.params.id\n      }\n    }).select([\"email\", \"username\", \"avatarImage\", \"_id\"]);\n    return res.json(users);\n  } catch (error) {\n    return res.status(200).send({\n      status: false,\n      error\n    });\n  }\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst logOut = async (req, res, next) => {\n  try {\n    if (!req.params.id) return res.json({\n      msg: \"User id is required \"\n    });\n    onlineUsers.delete(req.params.id);\n    return res.status(200).send();\n  } catch (ex) {\n    next(ex);\n  }\n};\n\nexports.logOut = logOut;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsIm5leHQiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlcm5hbWVDaGVjayIsIlVzZXIiLCJmaW5kT25lIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJlbWFpbENoZWNrIiwiaGFzaGVkUGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIiwidXNlciIsImNyZWF0ZSIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwiZXJyb3IiLCJsb2dpbiIsIm1zZyIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJzZXRBdmF0YXIiLCJ1c2VySWQiLCJwYXJhbXMiLCJpZCIsImF2YXRhckltYWdlIiwiaW1hZ2UiLCJ1c2VyRGF0YSIsImZpbmRCeUlkQW5kVXBkYXRlIiwiaXNBdmF0YXJJbWFnZVNldCIsIm5ldyIsImlzU2V0IiwiZXgiLCJnZXRBbGxVc2VycyIsInVzZXJzIiwiZmluZCIsIl9pZCIsIiRuZSIsInNlbGVjdCIsImxvZ091dCIsIm9ubGluZVVzZXJzIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbInVzZXIuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlci5tb2RlbCc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcblxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXIgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHVzZXJuYW1lLCBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB1c2VybmFtZUNoZWNrID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWUgfSk7XG4gICAgICAgIGlmICh1c2VybmFtZUNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBtZXNzYWdlOiBcIlVzZXJuYW1lIGFscmVhZHkgdXNlZFwiLCBzdGF0dXM6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVtYWlsQ2hlY2sgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICAgICAgaWYgKGVtYWlsQ2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7IG1lc3NhZ2U6IFwiRW1haWwgYWxyZWFkeSB1c2VkXCIsIHN0YXR1czogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkXG4gICAgICAgIH0pO1xuICAgICAgICBkZWxldGUgdXNlci5wYXNzd29yZDtcbiAgICAgICAgY29uc29sZS5sb2cocGFzc3dvcmQpXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IHN0YXR1czogdHJ1ZSwgdXNlciB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiBmYWxzZSwgZXJyb3IgfSlcblxuICAgIH1cblxufTtcblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWUgfSk7XG4gICAgICAgIGlmICghdXNlcilcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBtc2c6IFwiSW5jb3JyZWN0IFVzZXJuYW1lIG9yIFBhc3N3b3JkXCIsIHN0YXR1czogZmFsc2UgfSk7XG4gICAgICAgIGNvbnN0IGlzUGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgbXNnOiBcIkluY29ycmVjdCBVc2VybmFtZSBvciBQYXNzd29yZFwiLCBzdGF0dXM6IGZhbHNlIH0pO1xuICAgICAgICBkZWxldGUgdXNlci5wYXNzd29yZDtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3RhdHVzOiB0cnVlLCB1c2VyIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiBmYWxzZSwgZXJyb3IgfSlcblxuICAgIH1cblxufTtcblxuZXhwb3J0IGNvbnN0IHNldEF2YXRhciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VySWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgY29uc3QgYXZhdGFySW1hZ2UgPSByZXEuYm9keS5pbWFnZTtcbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB7XG4gICAgICAgICAgaXNBdmF0YXJJbWFnZVNldDogdHJ1ZSxcbiAgICAgICAgICBhdmF0YXJJbWFnZSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICAgIGlzU2V0OiB1c2VyRGF0YS5pc0F2YXRhckltYWdlU2V0LFxuICAgICAgICBpbWFnZTogdXNlckRhdGEuYXZhdGFySW1hZ2UsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgbmV4dChleCk7XG4gICAgfVxuICB9O1xuXG5cbmV4cG9ydCBjb25zdCBnZXRBbGxVc2VycyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHsgX2lkOiB7ICRuZTogcmVxLnBhcmFtcy5pZCB9IH0pLnNlbGVjdChbXG4gICAgICBcImVtYWlsXCIsXG4gICAgICBcInVzZXJuYW1lXCIsXG4gICAgICBcImF2YXRhckltYWdlXCIsXG4gICAgICBcIl9pZFwiLFxuICAgIF0pO1xuICAgIHJldHVybiByZXMuanNvbih1c2Vycyk7XG4gICAgICBcbiAgfVxuICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN0YXR1czogZmFsc2UsIGVycm9yIH0pXG5cbiAgfVxuXG59O1xuXG5leHBvcnQgY29uc3QgbG9nT3V0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFyZXEucGFyYW1zLmlkKSByZXR1cm4gcmVzLmpzb24oeyBtc2c6IFwiVXNlciBpZCBpcyByZXF1aXJlZCBcIiB9KTtcbiAgICBvbmxpbmVVc2Vycy5kZWxldGUocmVxLnBhcmFtcy5pZCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgbmV4dChleCk7XG4gIH1cblxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBR08sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDOUMsSUFBSTtJQUNBLE1BQU07TUFBRUMsUUFBRjtNQUFZQyxLQUFaO01BQW1CQztJQUFuQixJQUFnQ0wsR0FBRyxDQUFDTSxJQUEx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","map":{"version":3,"names":["register","req","res","next","username","email","password","body","usernameCheck","User","findOne","json","message","status","emailCheck","hashedPassword","bcrypt","hash","user","create","console","log","send","error","login","msg","isPasswordValid","compare","setAvatar","userId","params","id","avatarImage","image","userData","findByIdAndUpdate","isAvatarImageSet","new","isSet","ex","getAllUsers","users","find","_id","$ne","select","logOut","onlineUsers","delete"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/","sources":["user.controller.js"],"sourcesContent":["import User from '../models/user.model';\nimport bcrypt from 'bcryptjs';\n\n\nexport const register = async (req, res, next) => {\n    try {\n        const { username, email, password } = req.body;\n        const usernameCheck = await User.findOne({ username });\n        if (usernameCheck) {\n            return res.json({ message: \"Username already used\", status: false });\n        }\n        const emailCheck = await User.findOne({ email });\n        if (emailCheck) {\n            return res.json({ message: \"Email already used\", status: false });\n        }\n        const hashedPassword = await bcrypt.hash(password, 10);\n\n        const user = await User.create({\n            username,\n            email,\n            password: hashedPassword\n        });\n        delete user.password;\n        console.log(password)\n        return res.status(201).send({ status: true, user })\n    }\n    catch (error) {\n        return res.status(200).send({ status: false, error })\n\n    }\n\n};\n\nexport const login = async (req, res, next) => {\n    try {\n        const { username, password } = req.body;\n        const user = await User.findOne({ username });\n        if (!user)\n          return res.json({ msg: \"Incorrect Username or Password\", status: false });\n        const isPasswordValid = await bcrypt.compare(password, user.password);\n        if (!isPasswordValid)\n          return res.json({ msg: \"Incorrect Username or Password\", status: false });\n        delete user.password;\n        return res.json({ status: true, user });\n    }\n    catch (error) {\n        return res.status(200).send({ status: false, error })\n\n    }\n\n};\n\nexport const setAvatar = async (req, res, next) => {\n    try {\n      const userId = req.params.id;\n      const avatarImage = req.body.image;\n      const userData = await User.findByIdAndUpdate(\n        userId,\n        {\n          isAvatarImageSet: true,\n          avatarImage,\n        },\n        { new: true }\n      );\n      return res.json({\n        isSet: userData.isAvatarImageSet,\n        image: userData.avatarImage,\n      });\n    } catch (ex) {\n      next(ex);\n    }\n  };\n\n\nexport const getAllUsers = async (req, res, next) => {\n  try {\n    const users = await User.find({ _id: { $ne: req.params.id } }).select([\n      \"email\",\n      \"username\",\n      \"avatarImage\",\n      \"_id\",\n    ]);\n    return res.json(users);\n      \n  }\n  catch (error) {\n      return res.status(200).send({ status: false, error })\n\n  }\n\n};\n\nexport const logOut = async (req, res, next) => {\n  try {\n    if (!req.params.id) return res.json({ msg: \"User id is required \" });\n    onlineUsers.delete(req.params.id);\n    return res.status(200).send();\n  } catch (ex) {\n    next(ex);\n  }\n\n};\n"],"mappings":"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"}},"mtime":1658932134232},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/user.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import { isEmail } from 'validator';\nconst Schema = _mongoose.default.Schema;\nconst UserSchema = new Schema({\n  username: {\n    type: String,\n    required: true,\n    min: 3,\n    max: 20,\n    unique: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    max: 50\n  },\n  password: {\n    type: String,\n    required: true,\n    min: 6\n  },\n  isAvatarImageSet: {\n    type: Boolean,\n    default: false\n  },\n  avatarImage: {\n    type: String,\n    default: \"\"\n  }\n});\n\nlet User = _mongoose.default.model('User', UserSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIlVzZXJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbiIsIm1heCIsInVuaXF1ZSIsImVtYWlsIiwicGFzc3dvcmQiLCJpc0F2YXRhckltYWdlU2V0IiwiQm9vbGVhbiIsImRlZmF1bHQiLCJhdmF0YXJJbWFnZSIsIlVzZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL3NvY2tldC5pby9jaGF0LXNvY2tldC5pb18yL3NlcnZlci9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuLy9pbXBvcnQgeyBpc0VtYWlsIH0gZnJvbSAndmFsaWRhdG9yJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWluOiAzLFxuICAgICAgICBtYXg6IDIwLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIG1heDogNTAsXG4gICAgfSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtaW46IDYsXG4gICAgfSxcbiAgICBpc0F2YXRhckltYWdlU2V0OiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gICAgYXZhdGFySW1hZ2U6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgIH0sXG59KVxuXG5sZXQgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7O0FBREE7QUFHQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBQ0EsTUFBTUUsVUFBVSxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUMxQkcsUUFBUSxFQUFFO0lBQ05DLElBQUksRUFBRUMsTUFEQTtJQUVOQyxRQUFRLEVBQUUsSUFGSjtJQUdOQyxHQUFHLEVBQUUsQ0FIQztJQUlOQyxHQUFHLEVBQUUsRUFKQztJQUtOQyxNQUFNLEVBQUU7RUFMRixDQURnQjtFQVExQkMsS0FBSyxFQUFFO0lBQ0hOLElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUUsSUFGUDtJQUdIRyxNQUFNLEVBQUUsSUFITDtJQUlIRCxHQUFHLEVBQUU7RUFKRixDQVJtQjtFQWMxQkcsUUFBUSxFQUFFO0lBQ05QLElBQUksRUFBRUMsTUFEQTtJQUVOQyxRQUFRLEVBQUUsSUFGSjtJQUdOQyxHQUFHLEVBQUU7RUFIQyxDQWRnQjtFQW1CMUJLLGdCQUFnQixFQUFFO0lBQ2RSLElBQUksRUFBRVMsT0FEUTtJQUVkQyxPQUFPLEVBQUU7RUFGSyxDQW5CUTtFQXVCMUJDLFdBQVcsRUFBRTtJQUNUWCxJQUFJLEVBQUVDLE1BREc7SUFFVFMsT0FBTyxFQUFFO0VBRkE7QUF2QmEsQ0FBWCxDQUFuQjs7QUE2QkEsSUFBSUUsSUFBSSxHQUFHZixpQkFBQSxDQUFTZ0IsS0FBVCxDQUFlLE1BQWYsRUFBdUJmLFVBQXZCLENBQVg7O2VBQ2VjLEkifQ==","map":{"version":3,"names":["Schema","mongoose","UserSchema","username","type","String","required","min","max","unique","email","password","isAvatarImageSet","Boolean","default","avatarImage","User","model"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/","sources":["user.model.js"],"sourcesContent":["import mongoose from 'mongoose';\n//import { isEmail } from 'validator';\nimport bcrypt from 'bcryptjs';\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    username: {\n        type: String,\n        required: true,\n        min: 3,\n        max: 20,\n        unique: true,\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        max: 50,\n    },\n    password: {\n        type: String,\n        required: true,\n        min: 6,\n    },\n    isAvatarImageSet: {\n        type: Boolean,\n        default: false,\n    },\n    avatarImage: {\n        type: String,\n        default: \"\",\n    },\n})\n\nlet User = mongoose.model('User', UserSchema);\nexport default User;"],"mappings":";;;;;;;AAAA;;AAEA;;;;AADA;AAGA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AACA,MAAME,UAAU,GAAG,IAAIF,MAAJ,CAAW;EAC1BG,QAAQ,EAAE;IACNC,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,IAFJ;IAGNC,GAAG,EAAE,CAHC;IAINC,GAAG,EAAE,EAJC;IAKNC,MAAM,EAAE;EALF,CADgB;EAQ1BC,KAAK,EAAE;IACHN,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHG,MAAM,EAAE,IAHL;IAIHD,GAAG,EAAE;EAJF,CARmB;EAc1BG,QAAQ,EAAE;IACNP,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,IAFJ;IAGNC,GAAG,EAAE;EAHC,CAdgB;EAmB1BK,gBAAgB,EAAE;IACdR,IAAI,EAAES,OADQ;IAEdC,OAAO,EAAE;EAFK,CAnBQ;EAuB1BC,WAAW,EAAE;IACTX,IAAI,EAAEC,MADG;IAETS,OAAO,EAAE;EAFA;AAvBa,CAAX,CAAnB;;AA6BA,IAAIE,IAAI,GAAGf,iBAAA,CAASgB,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAX;;eACec,I"}},"mtime":1658394044546},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/user.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import { isEmail } from 'validator';\nconst Schema = _mongoose.default.Schema;\nconst UserSchema = new Schema({\n  username: {\n    type: String,\n    required: true,\n    min: 3,\n    max: 20,\n    unique: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    max: 50\n  },\n  password: {\n    type: String,\n    required: true,\n    min: 6\n  },\n  isAvatarImageSet: {\n    type: Boolean,\n    default: false\n  },\n  avatarImage: {\n    type: String,\n    default: \"\"\n  }\n});\n\nlet User = _mongoose.default.model('User', UserSchema);\n\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIlVzZXJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbiIsIm1heCIsInVuaXF1ZSIsImVtYWlsIiwicGFzc3dvcmQiLCJpc0F2YXRhckltYWdlU2V0IiwiQm9vbGVhbiIsImRlZmF1bHQiLCJhdmF0YXJJbWFnZSIsIlVzZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL3NvY2tldC5pby9jaGF0LXNvY2tldC5pb18yL3NlcnZlci9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlci5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuLy9pbXBvcnQgeyBpc0VtYWlsIH0gZnJvbSAndmFsaWRhdG9yJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWluOiAzLFxuICAgICAgICBtYXg6IDIwLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgfSxcbiAgICBlbWFpbDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB1bmlxdWU6IHRydWUsXG4gICAgICAgIG1heDogNTAsXG4gICAgfSxcbiAgICBwYXNzd29yZDoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtaW46IDYsXG4gICAgfSxcbiAgICBpc0F2YXRhckltYWdlU2V0OiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gICAgYXZhdGFySW1hZ2U6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBcIlwiLFxuICAgIH0sXG59KVxuXG5sZXQgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBVc2VyOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7O0FBREE7QUFHQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBQ0EsTUFBTUUsVUFBVSxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUMxQkcsUUFBUSxFQUFFO0lBQ05DLElBQUksRUFBRUMsTUFEQTtJQUVOQyxRQUFRLEVBQUUsSUFGSjtJQUdOQyxHQUFHLEVBQUUsQ0FIQztJQUlOQyxHQUFHLEVBQUUsRUFKQztJQUtOQyxNQUFNLEVBQUU7RUFMRixDQURnQjtFQVExQkMsS0FBSyxFQUFFO0lBQ0hOLElBQUksRUFBRUMsTUFESDtJQUVIQyxRQUFRLEVBQUUsSUFGUDtJQUdIRyxNQUFNLEVBQUUsSUFITDtJQUlIRCxHQUFHLEVBQUU7RUFKRixDQVJtQjtFQWMxQkcsUUFBUSxFQUFFO0lBQ05QLElBQUksRUFBRUMsTUFEQTtJQUVOQyxRQUFRLEVBQUUsSUFGSjtJQUdOQyxHQUFHLEVBQUU7RUFIQyxDQWRnQjtFQW1CMUJLLGdCQUFnQixFQUFFO0lBQ2RSLElBQUksRUFBRVMsT0FEUTtJQUVkQyxPQUFPLEVBQUU7RUFGSyxDQW5CUTtFQXVCMUJDLFdBQVcsRUFBRTtJQUNUWCxJQUFJLEVBQUVDLE1BREc7SUFFVFMsT0FBTyxFQUFFO0VBRkE7QUF2QmEsQ0FBWCxDQUFuQjs7QUE2QkEsSUFBSUUsSUFBSSxHQUFHZixpQkFBQSxDQUFTZ0IsS0FBVCxDQUFlLE1BQWYsRUFBdUJmLFVBQXZCLENBQVg7O2VBQ2VjLEkifQ==","map":{"version":3,"names":["Schema","mongoose","UserSchema","username","type","String","required","min","max","unique","email","password","isAvatarImageSet","Boolean","default","avatarImage","User","model"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/","sources":["user.model.js"],"sourcesContent":["import mongoose from 'mongoose';\n//import { isEmail } from 'validator';\nimport bcrypt from 'bcryptjs';\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    username: {\n        type: String,\n        required: true,\n        min: 3,\n        max: 20,\n        unique: true,\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true,\n        max: 50,\n    },\n    password: {\n        type: String,\n        required: true,\n        min: 6,\n    },\n    isAvatarImageSet: {\n        type: Boolean,\n        default: false,\n    },\n    avatarImage: {\n        type: String,\n        default: \"\",\n    },\n})\n\nlet User = mongoose.model('User', UserSchema);\nexport default User;"],"mappings":";;;;;;;AAAA;;AAEA;;;;AADA;AAGA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AACA,MAAME,UAAU,GAAG,IAAIF,MAAJ,CAAW;EAC1BG,QAAQ,EAAE;IACNC,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,IAFJ;IAGNC,GAAG,EAAE,CAHC;IAINC,GAAG,EAAE,EAJC;IAKNC,MAAM,EAAE;EALF,CADgB;EAQ1BC,KAAK,EAAE;IACHN,IAAI,EAAEC,MADH;IAEHC,QAAQ,EAAE,IAFP;IAGHG,MAAM,EAAE,IAHL;IAIHD,GAAG,EAAE;EAJF,CARmB;EAc1BG,QAAQ,EAAE;IACNP,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,IAFJ;IAGNC,GAAG,EAAE;EAHC,CAdgB;EAmB1BK,gBAAgB,EAAE;IACdR,IAAI,EAAES,OADQ;IAEdC,OAAO,EAAE;EAFK,CAnBQ;EAuB1BC,WAAW,EAAE;IACTX,IAAI,EAAEC,MADG;IAETS,OAAO,EAAE;EAFA;AAvBa,CAAX,CAAnB;;AA6BA,IAAIE,IAAI,GAAGf,iBAAA,CAASgB,KAAT,CAAe,MAAf,EAAuBf,UAAvB,CAAX;;eACec,I"}},"mtime":1658394044546},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/message.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _message = require(\"../../controllers/message.controller\");\n\nconst api = (0, _express.Router)();\napi.post(\"/addmsg\", _message.addMessage);\napi.post(\"/getmsg\", _message.getMessages);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcGkiLCJSb3V0ZXIiLCJwb3N0IiwiYWRkTWVzc2FnZSIsImdldE1lc3NhZ2VzIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvYXBpLyIsInNvdXJjZXMiOlsibWVzc2FnZS5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuaW1wb3J0IHthZGRNZXNzYWdlLCBnZXRNZXNzYWdlc30gIGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9tZXNzYWdlLmNvbnRyb2xsZXJcIjtcblxuXG5hcGkucG9zdChcIi9hZGRtc2dcIiwgYWRkTWVzc2FnZSk7XG5hcGkucG9zdChcIi9nZXRtc2dcIiwgZ2V0TWVzc2FnZXMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBREEsTUFBTUEsR0FBRyxHQUFHLElBQUFDLGVBQUEsR0FBWjtBQUlBRCxHQUFHLENBQUNFLElBQUosQ0FBUyxTQUFULEVBQW9CQyxtQkFBcEI7QUFDQUgsR0FBRyxDQUFDRSxJQUFKLENBQVMsU0FBVCxFQUFvQkUsb0JBQXBCO2VBRWVKLEcifQ==","map":{"version":3,"names":["api","Router","post","addMessage","getMessages"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/","sources":["message.route.js"],"sourcesContent":["import { Router } from 'express';\nconst api = Router();\nimport {addMessage, getMessages}  from \"../../controllers/message.controller\";\n\n\napi.post(\"/addmsg\", addMessage);\napi.post(\"/getmsg\", getMessages);\n\nexport default api;"],"mappings":";;;;;;;AAAA;;AAEA;;AADA,MAAMA,GAAG,GAAG,IAAAC,eAAA,GAAZ;AAIAD,GAAG,CAACE,IAAJ,CAAS,SAAT,EAAoBC,mBAApB;AACAH,GAAG,CAACE,IAAJ,CAAS,SAAT,EAAoBE,oBAApB;eAEeJ,G"}},"mtime":1658940834174},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/message.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMessages = exports.addMessage = void 0;\n\nvar _message = _interopRequireDefault(require(\"../models/message.model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst addMessage = async (req, res, next) => {\n  try {\n    const {\n      from,\n      to,\n      message\n    } = req.body;\n    const data = await _message.default.create({\n      message: {\n        text: message\n      },\n      users: [from, to],\n      sender: from\n    });\n\n    if (data) {\n      return res.json({\n        msg: \"Message added successfully.\"\n      });\n    } else {\n      return res.json({\n        msg: \"Failed to add msg to the database\"\n      });\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n\nexports.addMessage = addMessage;\n\nconst getMessages = async (req, res, next) => {\n  try {\n    const {\n      from,\n      to\n    } = req.body;\n    const messages = await _message.default.find({\n      users: {\n        $all: [from, to]\n      }\n    }).sort({\n      updatedAt: 1\n    });\n    const projectedMessages = messages.map(msg => {\n      return {\n        fromSelf: msg.sender.toString() === from,\n        message: msg.message.text\n      };\n    });\n    res.json(projectedMessages);\n  } catch (error) {\n    next(error);\n  }\n};\n\nexports.getMessages = getMessages;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGRNZXNzYWdlIiwicmVxIiwicmVzIiwibmV4dCIsImZyb20iLCJ0byIsIm1lc3NhZ2UiLCJib2R5IiwiZGF0YSIsIk1lc3NhZ2UiLCJjcmVhdGUiLCJ0ZXh0IiwidXNlcnMiLCJzZW5kZXIiLCJqc29uIiwibXNnIiwiZXJyb3IiLCJnZXRNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiZmluZCIsIiRhbGwiLCJzb3J0IiwidXBkYXRlZEF0IiwicHJvamVjdGVkTWVzc2FnZXMiLCJtYXAiLCJmcm9tU2VsZiIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm1lc3NhZ2UuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVzc2FnZSBmcm9tIFwiLi4vbW9kZWxzL21lc3NhZ2UubW9kZWxcIjtcblxuXG5leHBvcnQgY29uc3QgYWRkTWVzc2FnZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0e2Zyb20sIHRvLCBtZXNzYWdlfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZTogIHt0ZXh0Om1lc3NhZ2V9LFxuICAgICAgICAgICAgdXNlcnM6W2Zyb20sIHRvXSxcbiAgICAgICAgICAgIHNlbmRlcjogZnJvbVxuICAgICAgICB9KTtcbiAgICAgICAgaWYoZGF0YSl7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oe21zZzogXCJNZXNzYWdlIGFkZGVkIHN1Y2Nlc3NmdWxseS5cIn0pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7bXNnOiBcIkZhaWxlZCB0byBhZGQgbXNnIHRvIHRoZSBkYXRhYmFzZVwifSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcilcblxuICAgIH1cblxufTtcbmV4cG9ydCBjb25zdCBnZXRNZXNzYWdlcyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZnJvbSwgdG8gfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICAgICRhbGw6IFtmcm9tLCB0b10sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkuc29ydCh7IHVwZGF0ZWRBdDogMSB9KTtcbiAgICBcbiAgICAgICAgY29uc3QgcHJvamVjdGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1zZykgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tU2VsZjogbXNnLnNlbmRlci50b1N0cmluZygpID09PSBmcm9tLFxuICAgICAgICAgICAgbWVzc2FnZTogbXNnLm1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzLmpzb24ocHJvamVjdGVkTWVzc2FnZXMpO1xuICAgICAgfSBcbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcilcblxuICAgIH1cblxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBR08sTUFBTUEsVUFBVSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDaEQsSUFBSTtJQUNBLE1BQUs7TUFBQ0MsSUFBRDtNQUFPQyxFQUFQO01BQVdDO0lBQVgsSUFBc0JMLEdBQUcsQ0FBQ00sSUFBL0I7SUFDQSxNQUFNQyxJQUFJLEdBQUcsTUFBTUMsZ0JBQUEsQ0FBUUMsTUFBUixDQUFlO01BQzlCSixPQUFPLEVBQUc7UUFBQ0ssSUFBSSxFQUFDTDtNQUFOLENBRG9CO01BRTlCTSxLQUFLLEVBQUMsQ0FBQ1IsSUFBRCxFQUFPQyxFQUFQLENBRndCO01BRzlCUSxNQUFNLEVBQUVUO0lBSHNCLENBQWYsQ0FBbkI7O0lBS0EsSUFBR0ksSUFBSCxFQUFRO01BQ0osT0FBT04sR0FBRyxDQUFDWSxJQUFKLENBQVM7UUFBQ0MsR0FBRyxFQUFFO01BQU4sQ0FBVCxDQUFQO0lBQ0gsQ0FGRCxNQUdJO01BQ0EsT0FBT2IsR0FBRyxDQUFDWSxJQUFKLENBQVM7UUFBQ0MsR0FBRyxFQUFFO01BQU4sQ0FBVCxDQUFQO0lBQ0g7RUFDSixDQWJELENBY0EsT0FBT0MsS0FBUCxFQUFjO0lBQ1ZiLElBQUksQ0FBQ2EsS0FBRCxDQUFKO0VBRUg7QUFFSixDQXBCTTs7OztBQXFCQSxNQUFNQyxXQUFXLEdBQUcsT0FBT2hCLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDakQsSUFBSTtJQUNBLE1BQU07TUFBRUMsSUFBRjtNQUFRQztJQUFSLElBQWVKLEdBQUcsQ0FBQ00sSUFBekI7SUFFQSxNQUFNVyxRQUFRLEdBQUcsTUFBTVQsZ0JBQUEsQ0FBUVUsSUFBUixDQUFhO01BQ2xDUCxLQUFLLEVBQUU7UUFDTFEsSUFBSSxFQUFFLENBQUNoQixJQUFELEVBQU9DLEVBQVA7TUFERDtJQUQyQixDQUFiLEVBSXBCZ0IsSUFKb0IsQ0FJZjtNQUFFQyxTQUFTLEVBQUU7SUFBYixDQUplLENBQXZCO0lBTUEsTUFBTUMsaUJBQWlCLEdBQUdMLFFBQVEsQ0FBQ00sR0FBVCxDQUFjVCxHQUFELElBQVM7TUFDOUMsT0FBTztRQUNMVSxRQUFRLEVBQUVWLEdBQUcsQ0FBQ0YsTUFBSixDQUFXYSxRQUFYLE9BQTBCdEIsSUFEL0I7UUFFTEUsT0FBTyxFQUFFUyxHQUFHLENBQUNULE9BQUosQ0FBWUs7TUFGaEIsQ0FBUDtJQUlELENBTHlCLENBQTFCO0lBTUFULEdBQUcsQ0FBQ1ksSUFBSixDQUFTUyxpQkFBVDtFQUNELENBaEJILENBaUJBLE9BQU9QLEtBQVAsRUFBYztJQUNWYixJQUFJLENBQUNhLEtBQUQsQ0FBSjtFQUVIO0FBRUosQ0F2Qk0ifQ==","map":{"version":3,"names":["addMessage","req","res","next","from","to","message","body","data","Message","create","text","users","sender","json","msg","error","getMessages","messages","find","$all","sort","updatedAt","projectedMessages","map","fromSelf","toString"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/","sources":["message.controller.js"],"sourcesContent":["import Message from \"../models/message.model\";\n\n\nexport const addMessage = async (req, res, next) => {\n    try {\n        const{from, to, message} = req.body;\n        const data = await Message.create({\n            message:  {text:message},\n            users:[from, to],\n            sender: from\n        });\n        if(data){\n            return res.json({msg: \"Message added successfully.\"})\n        }\n        else{\n            return res.json({msg: \"Failed to add msg to the database\"})\n        }\n    }\n    catch (error) {\n        next(error)\n\n    }\n\n};\nexport const getMessages = async (req, res, next) => {\n    try {\n        const { from, to } = req.body;\n    \n        const messages = await Message.find({\n          users: {\n            $all: [from, to],\n          },\n        }).sort({ updatedAt: 1 });\n    \n        const projectedMessages = messages.map((msg) => {\n          return {\n            fromSelf: msg.sender.toString() === from,\n            message: msg.message.text,\n          };\n        });\n        res.json(projectedMessages);\n      } \n    catch (error) {\n        next(error)\n\n    }\n\n};\n"],"mappings":";;;;;;;AAAA;;;;AAGO,MAAMA,UAAU,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAChD,IAAI;IACA,MAAK;MAACC,IAAD;MAAOC,EAAP;MAAWC;IAAX,IAAsBL,GAAG,CAACM,IAA/B;IACA,MAAMC,IAAI,GAAG,MAAMC,gBAAA,CAAQC,MAAR,CAAe;MAC9BJ,OAAO,EAAG;QAACK,IAAI,EAACL;MAAN,CADoB;MAE9BM,KAAK,EAAC,CAACR,IAAD,EAAOC,EAAP,CAFwB;MAG9BQ,MAAM,EAAET;IAHsB,CAAf,CAAnB;;IAKA,IAAGI,IAAH,EAAQ;MACJ,OAAON,GAAG,CAACY,IAAJ,CAAS;QAACC,GAAG,EAAE;MAAN,CAAT,CAAP;IACH,CAFD,MAGI;MACA,OAAOb,GAAG,CAACY,IAAJ,CAAS;QAACC,GAAG,EAAE;MAAN,CAAT,CAAP;IACH;EACJ,CAbD,CAcA,OAAOC,KAAP,EAAc;IACVb,IAAI,CAACa,KAAD,CAAJ;EAEH;AAEJ,CApBM;;;;AAqBA,MAAMC,WAAW,GAAG,OAAOhB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACjD,IAAI;IACA,MAAM;MAAEC,IAAF;MAAQC;IAAR,IAAeJ,GAAG,CAACM,IAAzB;IAEA,MAAMW,QAAQ,GAAG,MAAMT,gBAAA,CAAQU,IAAR,CAAa;MAClCP,KAAK,EAAE;QACLQ,IAAI,EAAE,CAAChB,IAAD,EAAOC,EAAP;MADD;IAD2B,CAAb,EAIpBgB,IAJoB,CAIf;MAAEC,SAAS,EAAE;IAAb,CAJe,CAAvB;IAMA,MAAMC,iBAAiB,GAAGL,QAAQ,CAACM,GAAT,CAAcT,GAAD,IAAS;MAC9C,OAAO;QACLU,QAAQ,EAAEV,GAAG,CAACF,MAAJ,CAAWa,QAAX,OAA0BtB,IAD/B;QAELE,OAAO,EAAES,GAAG,CAACT,OAAJ,CAAYK;MAFhB,CAAP;IAID,CALyB,CAA1B;IAMAT,GAAG,CAACY,IAAJ,CAASS,iBAAT;EACD,CAhBH,CAiBA,OAAOP,KAAP,EAAc;IACVb,IAAI,CAACa,KAAD,CAAJ;EAEH;AAEJ,CAvBM"}},"mtime":1658941832909},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/message.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema;\nconst MessageSchema = new Schema({\n  message: {\n    text: {\n      type: String,\n      required: true\n    }\n  },\n  users: Array,\n  sender: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\nlet Message = _mongoose.default.model('Messages', MessageSchema);\n\nvar _default = Message;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIk1lc3NhZ2VTY2hlbWEiLCJtZXNzYWdlIiwidGV4dCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVzZXJzIiwiQXJyYXkiLCJzZW5kZXIiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidGltZXN0YW1wcyIsIk1lc3NhZ2UiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL3NvY2tldC5pby9jaGF0LXNvY2tldC5pb18yL3NlcnZlci9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsibWVzc2FnZS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IE1lc3NhZ2VTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICBtZXNzYWdlOiB7XG4gICAgICB0ZXh0OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB9LFxuICAgIHVzZXJzOiBBcnJheSxcbiAgICBzZW5kZXI6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIHJlZjogXCJVc2VyXCIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgfVxuKTtcbmxldCBNZXNzYWdlID0gbW9uZ29vc2UubW9kZWwoJ01lc3NhZ2VzJywgTWVzc2FnZVNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBRUEsTUFBTUUsYUFBYSxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUM3QkcsT0FBTyxFQUFFO0lBQ1BDLElBQUksRUFBRTtNQUFFQyxJQUFJLEVBQUVDLE1BQVI7TUFBZ0JDLFFBQVEsRUFBRTtJQUExQjtFQURDLENBRG9CO0VBSTdCQyxLQUFLLEVBQUVDLEtBSnNCO0VBSzdCQyxNQUFNLEVBQUU7SUFDTkwsSUFBSSxFQUFFSixpQkFBQSxDQUFTRCxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdEI7SUFFTkMsR0FBRyxFQUFFLE1BRkM7SUFHTk4sUUFBUSxFQUFFO0VBSEo7QUFMcUIsQ0FBWCxFQVdwQjtFQUNFTyxVQUFVLEVBQUU7QUFEZCxDQVhvQixDQUF0Qjs7QUFlQSxJQUFJQyxPQUFPLEdBQUdkLGlCQUFBLENBQVNlLEtBQVQsQ0FBZSxVQUFmLEVBQTJCZCxhQUEzQixDQUFkOztlQUNlYSxPIn0=","map":{"version":3,"names":["Schema","mongoose","MessageSchema","message","text","type","String","required","users","Array","sender","Types","ObjectId","ref","timestamps","Message","model"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/","sources":["message.model.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nconst MessageSchema = new Schema({\n    message: {\n      text: { type: String, required: true },\n    },\n    users: Array,\n    sender: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true,\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\nlet Message = mongoose.model('Messages', MessageSchema);\nexport default Message;\n"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AAEA,MAAME,aAAa,GAAG,IAAIF,MAAJ,CAAW;EAC7BG,OAAO,EAAE;IACPC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAR;MAAgBC,QAAQ,EAAE;IAA1B;EADC,CADoB;EAI7BC,KAAK,EAAEC,KAJsB;EAK7BC,MAAM,EAAE;IACNL,IAAI,EAAEJ,iBAAA,CAASD,MAAT,CAAgBW,KAAhB,CAAsBC,QADtB;IAENC,GAAG,EAAE,MAFC;IAGNN,QAAQ,EAAE;EAHJ;AALqB,CAAX,EAWpB;EACEO,UAAU,EAAE;AADd,CAXoB,CAAtB;;AAeA,IAAIC,OAAO,GAAGd,iBAAA,CAASe,KAAT,CAAe,UAAf,EAA2Bd,aAA3B,CAAd;;eACea,O"}},"mtime":1658938103417},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/message.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _message = require(\"../../controllers/message.controller\");\n\nconst api = (0, _express.Router)();\napi.post(\"/addmsg\", _message.addMessage);\napi.post(\"/getmsg\", _message.getMessages);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcGkiLCJSb3V0ZXIiLCJwb3N0IiwiYWRkTWVzc2FnZSIsImdldE1lc3NhZ2VzIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9yb3V0ZXMvYXBpLyIsInNvdXJjZXMiOlsibWVzc2FnZS5yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuaW1wb3J0IHthZGRNZXNzYWdlLCBnZXRNZXNzYWdlc30gIGZyb20gXCIuLi8uLi9jb250cm9sbGVycy9tZXNzYWdlLmNvbnRyb2xsZXJcIjtcblxuXG5hcGkucG9zdChcIi9hZGRtc2dcIiwgYWRkTWVzc2FnZSk7XG5hcGkucG9zdChcIi9nZXRtc2dcIiwgZ2V0TWVzc2FnZXMpO1xuXG5leHBvcnQgZGVmYXVsdCBhcGk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7O0FBREEsTUFBTUEsR0FBRyxHQUFHLElBQUFDLGVBQUEsR0FBWjtBQUlBRCxHQUFHLENBQUNFLElBQUosQ0FBUyxTQUFULEVBQW9CQyxtQkFBcEI7QUFDQUgsR0FBRyxDQUFDRSxJQUFKLENBQVMsU0FBVCxFQUFvQkUsb0JBQXBCO2VBRWVKLEcifQ==","map":{"version":3,"names":["api","Router","post","addMessage","getMessages"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/routes/api/","sources":["message.route.js"],"sourcesContent":["import { Router } from 'express';\nconst api = Router();\nimport {addMessage, getMessages}  from \"../../controllers/message.controller\";\n\n\napi.post(\"/addmsg\", addMessage);\napi.post(\"/getmsg\", getMessages);\n\nexport default api;"],"mappings":";;;;;;;AAAA;;AAEA;;AADA,MAAMA,GAAG,GAAG,IAAAC,eAAA,GAAZ;AAIAD,GAAG,CAACE,IAAJ,CAAS,SAAT,EAAoBC,mBAApB;AACAH,GAAG,CAACE,IAAJ,CAAS,SAAT,EAAoBE,oBAApB;eAEeJ,G"}},"mtime":1658940834174},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/message.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMessages = exports.addMessage = void 0;\n\nvar _message = _interopRequireDefault(require(\"../models/message.model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst addMessage = async (req, res, next) => {\n  try {\n    const {\n      from,\n      to,\n      message\n    } = req.body;\n    const data = await _message.default.create({\n      message: {\n        text: message\n      },\n      users: [from, to],\n      sender: from\n    });\n\n    if (data) {\n      return res.json({\n        msg: \"Message added successfully.\"\n      });\n    } else {\n      return res.json({\n        msg: \"Failed to add msg to the database\"\n      });\n    }\n  } catch (error) {\n    next(error);\n  }\n};\n\nexports.addMessage = addMessage;\n\nconst getMessages = async (req, res, next) => {\n  try {\n    const {\n      from,\n      to\n    } = req.body;\n    const messages = await _message.default.find({\n      users: {\n        $all: [from, to]\n      }\n    }).sort({\n      updatedAt: 1\n    });\n    const projectedMessages = messages.map(msg => {\n      return {\n        fromSelf: msg.sender.toString() === from,\n        message: msg.message.text\n      };\n    });\n    res.json(projectedMessages);\n  } catch (error) {\n    next(error);\n  }\n};\n\nexports.getMessages = getMessages;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGRNZXNzYWdlIiwicmVxIiwicmVzIiwibmV4dCIsImZyb20iLCJ0byIsIm1lc3NhZ2UiLCJib2R5IiwiZGF0YSIsIk1lc3NhZ2UiLCJjcmVhdGUiLCJ0ZXh0IiwidXNlcnMiLCJzZW5kZXIiLCJqc29uIiwibXNnIiwiZXJyb3IiLCJnZXRNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiZmluZCIsIiRhbGwiLCJzb3J0IiwidXBkYXRlZEF0IiwicHJvamVjdGVkTWVzc2FnZXMiLCJtYXAiLCJmcm9tU2VsZiIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvc29ja2V0LmlvL2NoYXQtc29ja2V0LmlvXzIvc2VydmVyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIm1lc3NhZ2UuY29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVzc2FnZSBmcm9tIFwiLi4vbW9kZWxzL21lc3NhZ2UubW9kZWxcIjtcblxuXG5leHBvcnQgY29uc3QgYWRkTWVzc2FnZSA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0e2Zyb20sIHRvLCBtZXNzYWdlfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgTWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZTogIHt0ZXh0Om1lc3NhZ2V9LFxuICAgICAgICAgICAgdXNlcnM6W2Zyb20sIHRvXSxcbiAgICAgICAgICAgIHNlbmRlcjogZnJvbVxuICAgICAgICB9KTtcbiAgICAgICAgaWYoZGF0YSl7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oe21zZzogXCJNZXNzYWdlIGFkZGVkIHN1Y2Nlc3NmdWxseS5cIn0pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbih7bXNnOiBcIkZhaWxlZCB0byBhZGQgbXNnIHRvIHRoZSBkYXRhYmFzZVwifSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcilcblxuICAgIH1cblxufTtcbmV4cG9ydCBjb25zdCBnZXRNZXNzYWdlcyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZnJvbSwgdG8gfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XG4gICAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICAgICRhbGw6IFtmcm9tLCB0b10sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkuc29ydCh7IHVwZGF0ZWRBdDogMSB9KTtcbiAgICBcbiAgICAgICAgY29uc3QgcHJvamVjdGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1zZykgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tU2VsZjogbXNnLnNlbmRlci50b1N0cmluZygpID09PSBmcm9tLFxuICAgICAgICAgICAgbWVzc2FnZTogbXNnLm1lc3NhZ2UudGV4dCxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzLmpzb24ocHJvamVjdGVkTWVzc2FnZXMpO1xuICAgICAgfSBcbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV4dChlcnJvcilcblxuICAgIH1cblxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBR08sTUFBTUEsVUFBVSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDaEQsSUFBSTtJQUNBLE1BQUs7TUFBQ0MsSUFBRDtNQUFPQyxFQUFQO01BQVdDO0lBQVgsSUFBc0JMLEdBQUcsQ0FBQ00sSUFBL0I7SUFDQSxNQUFNQyxJQUFJLEdBQUcsTUFBTUMsZ0JBQUEsQ0FBUUMsTUFBUixDQUFlO01BQzlCSixPQUFPLEVBQUc7UUFBQ0ssSUFBSSxFQUFDTDtNQUFOLENBRG9CO01BRTlCTSxLQUFLLEVBQUMsQ0FBQ1IsSUFBRCxFQUFPQyxFQUFQLENBRndCO01BRzlCUSxNQUFNLEVBQUVUO0lBSHNCLENBQWYsQ0FBbkI7O0lBS0EsSUFBR0ksSUFBSCxFQUFRO01BQ0osT0FBT04sR0FBRyxDQUFDWSxJQUFKLENBQVM7UUFBQ0MsR0FBRyxFQUFFO01BQU4sQ0FBVCxDQUFQO0lBQ0gsQ0FGRCxNQUdJO01BQ0EsT0FBT2IsR0FBRyxDQUFDWSxJQUFKLENBQVM7UUFBQ0MsR0FBRyxFQUFFO01BQU4sQ0FBVCxDQUFQO0lBQ0g7RUFDSixDQWJELENBY0EsT0FBT0MsS0FBUCxFQUFjO0lBQ1ZiLElBQUksQ0FBQ2EsS0FBRCxDQUFKO0VBRUg7QUFFSixDQXBCTTs7OztBQXFCQSxNQUFNQyxXQUFXLEdBQUcsT0FBT2hCLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDakQsSUFBSTtJQUNBLE1BQU07TUFBRUMsSUFBRjtNQUFRQztJQUFSLElBQWVKLEdBQUcsQ0FBQ00sSUFBekI7SUFFQSxNQUFNVyxRQUFRLEdBQUcsTUFBTVQsZ0JBQUEsQ0FBUVUsSUFBUixDQUFhO01BQ2xDUCxLQUFLLEVBQUU7UUFDTFEsSUFBSSxFQUFFLENBQUNoQixJQUFELEVBQU9DLEVBQVA7TUFERDtJQUQyQixDQUFiLEVBSXBCZ0IsSUFKb0IsQ0FJZjtNQUFFQyxTQUFTLEVBQUU7SUFBYixDQUplLENBQXZCO0lBTUEsTUFBTUMsaUJBQWlCLEdBQUdMLFFBQVEsQ0FBQ00sR0FBVCxDQUFjVCxHQUFELElBQVM7TUFDOUMsT0FBTztRQUNMVSxRQUFRLEVBQUVWLEdBQUcsQ0FBQ0YsTUFBSixDQUFXYSxRQUFYLE9BQTBCdEIsSUFEL0I7UUFFTEUsT0FBTyxFQUFFUyxHQUFHLENBQUNULE9BQUosQ0FBWUs7TUFGaEIsQ0FBUDtJQUlELENBTHlCLENBQTFCO0lBTUFULEdBQUcsQ0FBQ1ksSUFBSixDQUFTUyxpQkFBVDtFQUNELENBaEJILENBaUJBLE9BQU9QLEtBQVAsRUFBYztJQUNWYixJQUFJLENBQUNhLEtBQUQsQ0FBSjtFQUVIO0FBRUosQ0F2Qk0ifQ==","map":{"version":3,"names":["addMessage","req","res","next","from","to","message","body","data","Message","create","text","users","sender","json","msg","error","getMessages","messages","find","$all","sort","updatedAt","projectedMessages","map","fromSelf","toString"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/controllers/","sources":["message.controller.js"],"sourcesContent":["import Message from \"../models/message.model\";\n\n\nexport const addMessage = async (req, res, next) => {\n    try {\n        const{from, to, message} = req.body;\n        const data = await Message.create({\n            message:  {text:message},\n            users:[from, to],\n            sender: from\n        });\n        if(data){\n            return res.json({msg: \"Message added successfully.\"})\n        }\n        else{\n            return res.json({msg: \"Failed to add msg to the database\"})\n        }\n    }\n    catch (error) {\n        next(error)\n\n    }\n\n};\nexport const getMessages = async (req, res, next) => {\n    try {\n        const { from, to } = req.body;\n    \n        const messages = await Message.find({\n          users: {\n            $all: [from, to],\n          },\n        }).sort({ updatedAt: 1 });\n    \n        const projectedMessages = messages.map((msg) => {\n          return {\n            fromSelf: msg.sender.toString() === from,\n            message: msg.message.text,\n          };\n        });\n        res.json(projectedMessages);\n      } \n    catch (error) {\n        next(error)\n\n    }\n\n};\n"],"mappings":";;;;;;;AAAA;;;;AAGO,MAAMA,UAAU,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAChD,IAAI;IACA,MAAK;MAACC,IAAD;MAAOC,EAAP;MAAWC;IAAX,IAAsBL,GAAG,CAACM,IAA/B;IACA,MAAMC,IAAI,GAAG,MAAMC,gBAAA,CAAQC,MAAR,CAAe;MAC9BJ,OAAO,EAAG;QAACK,IAAI,EAACL;MAAN,CADoB;MAE9BM,KAAK,EAAC,CAACR,IAAD,EAAOC,EAAP,CAFwB;MAG9BQ,MAAM,EAAET;IAHsB,CAAf,CAAnB;;IAKA,IAAGI,IAAH,EAAQ;MACJ,OAAON,GAAG,CAACY,IAAJ,CAAS;QAACC,GAAG,EAAE;MAAN,CAAT,CAAP;IACH,CAFD,MAGI;MACA,OAAOb,GAAG,CAACY,IAAJ,CAAS;QAACC,GAAG,EAAE;MAAN,CAAT,CAAP;IACH;EACJ,CAbD,CAcA,OAAOC,KAAP,EAAc;IACVb,IAAI,CAACa,KAAD,CAAJ;EAEH;AAEJ,CApBM;;;;AAqBA,MAAMC,WAAW,GAAG,OAAOhB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACjD,IAAI;IACA,MAAM;MAAEC,IAAF;MAAQC;IAAR,IAAeJ,GAAG,CAACM,IAAzB;IAEA,MAAMW,QAAQ,GAAG,MAAMT,gBAAA,CAAQU,IAAR,CAAa;MAClCP,KAAK,EAAE;QACLQ,IAAI,EAAE,CAAChB,IAAD,EAAOC,EAAP;MADD;IAD2B,CAAb,EAIpBgB,IAJoB,CAIf;MAAEC,SAAS,EAAE;IAAb,CAJe,CAAvB;IAMA,MAAMC,iBAAiB,GAAGL,QAAQ,CAACM,GAAT,CAAcT,GAAD,IAAS;MAC9C,OAAO;QACLU,QAAQ,EAAEV,GAAG,CAACF,MAAJ,CAAWa,QAAX,OAA0BtB,IAD/B;QAELE,OAAO,EAAES,GAAG,CAACT,OAAJ,CAAYK;MAFhB,CAAP;IAID,CALyB,CAA1B;IAMAT,GAAG,CAACY,IAAJ,CAASS,iBAAT;EACD,CAhBH,CAiBA,OAAOP,KAAP,EAAc;IACVb,IAAI,CAACa,KAAD,CAAJ;EAEH;AAEJ,CAvBM"}},"mtime":1658941832909},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/message.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Schema = _mongoose.default.Schema;\nconst MessageSchema = new Schema({\n  message: {\n    text: {\n      type: String,\n      required: true\n    }\n  },\n  users: Array,\n  sender: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: \"User\",\n    required: true\n  }\n}, {\n  timestamps: true\n});\n\nlet Message = _mongoose.default.model('Messages', MessageSchema);\n\nvar _default = Message;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsIk1lc3NhZ2VTY2hlbWEiLCJtZXNzYWdlIiwidGV4dCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVzZXJzIiwiQXJyYXkiLCJzZW5kZXIiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwidGltZXN0YW1wcyIsIk1lc3NhZ2UiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL3NvY2tldC5pby9jaGF0LXNvY2tldC5pb18yL3NlcnZlci9zcmMvbW9kZWxzLyIsInNvdXJjZXMiOlsibWVzc2FnZS5tb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IE1lc3NhZ2VTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICBtZXNzYWdlOiB7XG4gICAgICB0ZXh0OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB9LFxuICAgIHVzZXJzOiBBcnJheSxcbiAgICBzZW5kZXI6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIHJlZjogXCJVc2VyXCIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGltZXN0YW1wczogdHJ1ZSxcbiAgfVxuKTtcbmxldCBNZXNzYWdlID0gbW9uZ29vc2UubW9kZWwoJ01lc3NhZ2VzJywgTWVzc2FnZVNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLGlCQUFBLENBQVNELE1BQXhCO0FBRUEsTUFBTUUsYUFBYSxHQUFHLElBQUlGLE1BQUosQ0FBVztFQUM3QkcsT0FBTyxFQUFFO0lBQ1BDLElBQUksRUFBRTtNQUFFQyxJQUFJLEVBQUVDLE1BQVI7TUFBZ0JDLFFBQVEsRUFBRTtJQUExQjtFQURDLENBRG9CO0VBSTdCQyxLQUFLLEVBQUVDLEtBSnNCO0VBSzdCQyxNQUFNLEVBQUU7SUFDTkwsSUFBSSxFQUFFSixpQkFBQSxDQUFTRCxNQUFULENBQWdCVyxLQUFoQixDQUFzQkMsUUFEdEI7SUFFTkMsR0FBRyxFQUFFLE1BRkM7SUFHTk4sUUFBUSxFQUFFO0VBSEo7QUFMcUIsQ0FBWCxFQVdwQjtFQUNFTyxVQUFVLEVBQUU7QUFEZCxDQVhvQixDQUF0Qjs7QUFlQSxJQUFJQyxPQUFPLEdBQUdkLGlCQUFBLENBQVNlLEtBQVQsQ0FBZSxVQUFmLEVBQTJCZCxhQUEzQixDQUFkOztlQUNlYSxPIn0=","map":{"version":3,"names":["Schema","mongoose","MessageSchema","message","text","type","String","required","users","Array","sender","Types","ObjectId","ref","timestamps","Message","model"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/models/","sources":["message.model.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nconst MessageSchema = new Schema({\n    message: {\n      text: { type: String, required: true },\n    },\n    users: Array,\n    sender: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true,\n    },\n  },\n  {\n    timestamps: true,\n  }\n);\nlet Message = mongoose.model('Messages', MessageSchema);\nexport default Message;\n"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,MAAM,GAAGC,iBAAA,CAASD,MAAxB;AAEA,MAAME,aAAa,GAAG,IAAIF,MAAJ,CAAW;EAC7BG,OAAO,EAAE;IACPC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAR;MAAgBC,QAAQ,EAAE;IAA1B;EADC,CADoB;EAI7BC,KAAK,EAAEC,KAJsB;EAK7BC,MAAM,EAAE;IACNL,IAAI,EAAEJ,iBAAA,CAASD,MAAT,CAAgBW,KAAhB,CAAsBC,QADtB;IAENC,GAAG,EAAE,MAFC;IAGNN,QAAQ,EAAE;EAHJ;AALqB,CAAX,EAWpB;EACEO,UAAU,EAAE;AADd,CAXoB,CAAtB;;AAeA,IAAIC,OAAO,GAAGd,iBAAA,CAASe,KAAT,CAAe,UAAf,EAA2Bd,aAA3B,CAAd;;eACea,O"}},"mtime":1658938103417},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/main.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nvar _index = require(\"./index\");\n\nlet port = process.env.PORT;\n(0, _index.launch)({\n  host: 'localhost',\n  protocol: 'http',\n  port: port\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJsYXVuY2giLCJob3N0IiwicHJvdG9jb2wiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9zb2NrZXQuaW8vY2hhdC1zb2NrZXQuaW9fMi9zZXJ2ZXIvc3JjLyIsInNvdXJjZXMiOlsibWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsYXVuY2ggfSBmcm9tICcuL2luZGV4JztcbmxldCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCA7XG5sYXVuY2goe1xuICBob3N0OiAnbG9jYWxob3N0JyxcbiAgcHJvdG9jb2w6ICdodHRwJyxcbiAgcG9ydDogcG9ydCxcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQXZCO0FBQ0EsSUFBQUMsYUFBQSxFQUFPO0VBQ0xDLElBQUksRUFBRSxXQUREO0VBRUxDLFFBQVEsRUFBRSxNQUZMO0VBR0xOLElBQUksRUFBRUE7QUFIRCxDQUFQIn0=","map":{"version":3,"names":["port","process","env","PORT","launch","host","protocol"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/","sources":["main.js"],"sourcesContent":["import { launch } from './index';\nlet port = process.env.PORT ;\nlaunch({\n  host: 'localhost',\n  protocol: 'http',\n  port: port,\n});\n"],"mappings":";;AAAA;;AACA,IAAIA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAvB;AACA,IAAAC,aAAA,EAAO;EACLC,IAAI,EAAE,WADD;EAELC,QAAQ,EAAE,MAFL;EAGLN,IAAI,EAAEA;AAHD,CAAP"}},"mtime":1659002337020},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"filename\":\"/Applications/dossier/socket.io/chat-socket.io_2/server/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/socket.io/chat-socket.io_2/server\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.launch = launch;\n\nvar _index = _interopRequireDefault(require(\"./routes/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst express = require(\"express\");\n\nconst cors = require('cors');\n\nconst mongoose = require(\"mongoose\");\n\nfunction launch({\n  host,\n  protocol,\n  port\n}) {\n  const app = express();\n\n  require('dotenv').config();\n\n  const socket = require('socket.io');\n\n  app.use(cors());\n  app.use(express.json());\n  mongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/chat-app`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n  app.use(_index.default);\n  const server = app.listen(process.env.PORT, () => {\n    console.log(`Server started on Port ${process.env.PORT}`);\n  });\n  const io = socket(server, {\n    cors: {\n      origin: \"http://localhost:3001\",\n      credentials: true\n    }\n  });\n  global.onlineUsers = new Map();\n  io.on(\"connection\", socket => {\n    global.chatSocket = socket;\n    socket.on(\"add-user\", userId => {\n      onlineUsers.set(userId, socket.id);\n    });\n    socket.on(\"send-msg\", data => {\n      const sendUserSocket = onlineUsers.get(data.to);\n\n      if (sendUserSocket) {\n        socket.to(sendUserSocket).emit(\"msg-receive\", data.message);\n      }\n    });\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImNvcnMiLCJtb25nb29zZSIsImxhdW5jaCIsImhvc3QiLCJwcm90b2NvbCIsInBvcnQiLCJhcHAiLCJjb25maWciLCJzb2NrZXQiLCJ1c2UiLCJqc29uIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSTkFNRSIsIkRCX1BBU1NXT1JEIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIiwiZGVmYXVsdFJvdXRlciIsInNlcnZlciIsImxpc3RlbiIsIlBPUlQiLCJpbyIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwiZ2xvYmFsIiwib25saW5lVXNlcnMiLCJNYXAiLCJvbiIsImNoYXRTb2NrZXQiLCJ1c2VySWQiLCJzZXQiLCJpZCIsImRhdGEiLCJzZW5kVXNlclNvY2tldCIsImdldCIsInRvIiwiZW1pdCIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9zb2NrZXQuaW8vY2hhdC1zb2NrZXQuaW9fMi9zZXJ2ZXIvc3JjLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuaW1wb3J0IGRlZmF1bHRSb3V0ZXIgZnJvbSBcIi4vcm91dGVzL2luZGV4XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2goeyBob3N0LCBwcm90b2NvbCwgcG9ydCB9KSB7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG5cbmNvbnN0IHNvY2tldCA9IHJlcXVpcmUoJ3NvY2tldC5pbycpO1xuXG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcblxubW9uZ29vc2VcbiAgICAuY29ubmVjdChgbW9uZ29kYitzcnY6Ly8ke3Byb2Nlc3MuZW52LkRCX1VTRVJOQU1FfToke3Byb2Nlc3MuZW52LkRCX1BBU1NXT1JEfUBjbHVzdGVyMC5nYnZ4Zy5tb25nb2RiLm5ldC9jaGF0LWFwcGApXG4gICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCJykpXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJGYWlsZWQgdG8gY29ubmVjdCBNb25nb0RCXCIsIGVycm9yKSk7XG5cbiAgICBhcHAudXNlKGRlZmF1bHRSb3V0ZXIpO1xuXG5jb25zdCBzZXJ2ZXIgPSBhcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIHN0YXJ0ZWQgb24gUG9ydCAke3Byb2Nlc3MuZW52LlBPUlR9YCk7XG59KTtcblxuY29uc3QgaW8gPSBzb2NrZXQoc2VydmVyLHtcbiAgICBjb3JzOntcbiAgICAgICAgb3JpZ2luOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMVwiLFxuICAgICAgICBjcmVkZW50aWFsczogdHJ1ZSxcbiAgICB9XG59IClcbmdsb2JhbC5vbmxpbmVVc2VycyA9IG5ldyBNYXAoKTtcbmlvLm9uKFwiY29ubmVjdGlvblwiLCAoc29ja2V0KSA9PiB7XG4gIGdsb2JhbC5jaGF0U29ja2V0ID0gc29ja2V0O1xuICBzb2NrZXQub24oXCJhZGQtdXNlclwiLCAodXNlcklkKSA9PiB7XG4gICAgb25saW5lVXNlcnMuc2V0KHVzZXJJZCwgc29ja2V0LmlkKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKFwic2VuZC1tc2dcIiwgKGRhdGEpID0+IHtcbiAgICBjb25zdCBzZW5kVXNlclNvY2tldCA9IG9ubGluZVVzZXJzLmdldChkYXRhLnRvKTtcbiAgICBpZiAoc2VuZFVzZXJTb2NrZXQpIHtcbiAgICAgIHNvY2tldC50byhzZW5kVXNlclNvY2tldCkuZW1pdChcIm1zZy1yZWNlaXZlXCIsIGRhdGEu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","map":{"version":3,"names":["express","require","cors","mongoose","launch","host","protocol","port","app","config","socket","use","json","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error","defaultRouter","server","listen","PORT","io","origin","credentials","global","onlineUsers","Map","on","chatSocket","userId","set","id","data","sendUserSocket","get","to","emit","message"],"sourceRoot":"/Applications/dossier/socket.io/chat-socket.io_2/server/src/","sources":["index.js"],"sourcesContent":["const express = require(\"express\");\nconst cors = require('cors');\nconst mongoose = require(\"mongoose\");\nimport defaultRouter from \"./routes/index\";\n\nexport function launch({ host, protocol, port }) {\n\nconst app = express();\nrequire('dotenv').config();\n\n\nconst socket = require('socket.io');\n\napp.use(cors());\napp.use(express.json());\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/chat-app`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error));\n\n    app.use(defaultRouter);\n\nconst server = app.listen(process.env.PORT, () => {\n    console.log(`Server started on Port ${process.env.PORT}`);\n});\n\nconst io = socket(server,{\n    cors:{\n        origin: \"http://localhost:3001\",\n        credentials: true,\n    }\n} )\nglobal.onlineUsers = new Map();\nio.on(\"connection\", (socket) => {\n  global.chatSocket = socket;\n  socket.on(\"add-user\", (userId) => {\n    onlineUsers.set(userId, socket.id);\n  });\n\n  socket.on(\"send-msg\", (data) => {\n    const sendUserSocket = onlineUsers.get(data.to);\n    if (sendUserSocket) {\n      socket.to(sendUserSocket).emit(\"msg-receive\", data.message);\n    }\n  });\n});\n}"],"mappings":";;;;;;;AAGA;;;;AAHA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AAGO,SAASG,MAAT,CAAgB;EAAEC,IAAF;EAAQC,QAAR;EAAkBC;AAAlB,CAAhB,EAA0C;EAEjD,MAAMC,GAAG,GAAGR,OAAO,EAAnB;;EACAC,OAAO,CAAC,QAAD,CAAP,CAAkBQ,MAAlB;;EAGA,MAAMC,MAAM,GAAGT,OAAO,CAAC,WAAD,CAAtB;;EAEAO,GAAG,CAACG,GAAJ,CAAQT,IAAI,EAAZ;EACAM,GAAG,CAACG,GAAJ,CAAQX,OAAO,CAACY,IAAR,EAAR;EAEAT,QAAQ,CACHU,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,sCADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB;EAKId,GAAG,CAACG,GAAJ,CAAQY,cAAR;EAEJ,MAAMC,MAAM,GAAGhB,GAAG,CAACiB,MAAJ,CAAWX,OAAO,CAACC,GAAR,CAAYW,IAAvB,EAA6B,MAAM;IAC9CP,OAAO,CAACC,GAAR,CAAa,0BAAyBN,OAAO,CAACC,GAAR,CAAYW,IAAK,EAAvD;EACH,CAFc,CAAf;EAIA,MAAMC,EAAE,GAAGjB,MAAM,CAACc,MAAD,EAAQ;IACrBtB,IAAI,EAAC;MACD0B,MAAM,EAAE,uBADP;MAEDC,WAAW,EAAE;IAFZ;EADgB,CAAR,CAAjB;EAMAC,MAAM,CAACC,WAAP,GAAqB,IAAIC,GAAJ,EAArB;EACAL,EAAE,CAACM,EAAH,CAAM,YAAN,EAAqBvB,MAAD,IAAY;IAC9BoB,MAAM,CAACI,UAAP,GAAoBxB,MAApB;IACAA,MAAM,CAACuB,EAAP,CAAU,UAAV,EAAuBE,MAAD,IAAY;MAChCJ,WAAW,CAACK,GAAZ,CAAgBD,MAAhB,EAAwBzB,MAAM,CAAC2B,EAA/B;IACD,CAFD;IAIA3B,MAAM,CAACuB,EAAP,CAAU,UAAV,EAAuBK,IAAD,IAAU;MAC9B,MAAMC,cAAc,GAAGR,WAAW,CAACS,GAAZ,CAAgBF,IAAI,CAACG,EAArB,CAAvB;;MACA,IAAIF,cAAJ,EAAoB;QAClB7B,MAAM,CAAC+B,EAAP,CAAUF,cAAV,EAA0BG,IAA1B,CAA+B,aAA/B,EAA8CJ,IAAI,CAACK,OAAnD;MACD;IACF,CALD;EAMD,CAZD;AAaC"}},"mtime":1659002218498}}